(function(s){s.execute(function(){s.when("A","jQuery","dp-js-logger","dp-ajax-prefetch-metrics").register("dp-ajax-prefetch",function(o,l,b,a){function d(b,d,c,k,h,j){this.scope=b;this.uniqueId=d;this.url=c;this.options=k;this.context=h;this.status=m;this.selected=!1;this.error=this.successData=this.xhr=this._status=void 0;this.chunks=[];this.doNotAbort=j||!1;this.prefetchMetrics=a.getInstance(this.scope)}var m=0,i=new b("dpAjaxPrefetch");d.prototype._callback=function(a,b,c,d,h){typeof a==="function"&&
a.call(self,b,c,d,h)};d.prototype._canAbort=function(){return!this.doNotAbort&&this.status===1};d.prototype._isAborted=function(){return this.status===3};d.prototype._getUniqueId=function(){return this.uniqueId};d.prototype._abort=function(){if(this.status===1)try{this.ajaxRequestRefence.abort(),this.status=3}catch(a){i.logFatal(a,{message:" Could not abort ajax request."})}};d.prototype._flushChunkData=function(){var a=this;a.chunks.length&&l.map(a.chunks,function(b){a._callback(a.options.chunk,
b,a.context)})};d.prototype._request=function(){var a=this;a.ajaxRequestRefence=o.get(a.url,{params:a.options.params,success:function(b,c,d){a.status=4;a.successData=b;a._status=c;a.xhr=d;a.selected&&a._callback(a.options.success,b,c,d,a.context)},error:function(b,c,d){a.status=2;a.xhr=b;a._status=c;a.error=d;a.selected&&a._callback(a.options.error,b,c,d,a.context)},abort:function(b){a.status=3;a.xhr=b;a.selected&&a._callback(a.options.abort,b,a.context)},chunk:function(b){b&&(a.chunks.push(b),a.selected&&
a._callback(a.options.chunk,b,a.context))},timeout:a.options.timeout||4E4})};d.prototype.prefetchContent=function(){this.prefetchMetrics.predicted(this.uniqueId);if(this.status===m)this.status=1,this._request()};d.prototype.getContent=function(a){a&&this.prefetchMetrics.selected(this.uniqueId);d._abortPrefetchesExcept(this);this.selected=!0;this.status===m?(this.status=1,this._request()):this.status===1?this._flushChunkData():this.status===4&&(this._flushChunkData(),this._callback(this.options.success,
this.successData,this._status,this.xhr,this.context),o.trigger("a:pageUpdate"))};d._objects={};d._abortPrefetchesExcept=function(a){l.each(d._objects[a.scope],function(b,c){c._canAbort()&&b!==a._getUniqueId()&&c._abort()})};d.getInstance=function(a,b,c,k,h,j){if(!a||!b||!c||typeof k!=="object")throw"Incorrect parameter passed.";d._objects[a]=d._objects[a]||{};var f=d._objects[a][b];f&&f._isAborted()&&(delete d._objects[a][b],f=void 0);f||(d._objects[a][b]=new d(a,b,c,k,h,j,this));return d._objects[a][b]};
return d});s.register("dp-js-logger",function(){return function(o){function l(a,b,m){b=b||{};typeof a==="string"&&(b.message+=a,a=void 0);b.logLevel=m;window.ueLogError&&window.ueLogError(a,b)}var b=this;b.attribution=o||"Twister";b.logFatal=function(a,b){l(a,b,"FATAL")};b.logError=function(a,b){l(a,b,"ERROR")};b.logCounter=function(a,d){window.ue&&window.ue.count&&ue.count(b.attribution+a,d)};b.consoleLog=function(a){window.console&&typeof Twister!=="undefined"&&Twister.printConsoleLogs&&console.log(a)}}});
s.when("A","jQuery","dp-ajax-prefetch","twister-utils").register("dimensional-summary-module",function(o,l,b,a){return function(b){function m(a){if(c.initData.fnToDetermineSelectedVariations){if(typeof c.initData.fnToDetermineSelectedVariations==="function")c.currentDimCombOnGlance=c.initData.fnToDetermineSelectedVariations.call(c)}else c.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,c.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID;
return a?c.currentDimCombOnGlance.split("_"):c.currentDimCombOnGlance}function i(c,b){for(var f="",g,d,q=0,e=c.length;q<e;q++)f=f+(q>0?",":"")+c[q];(q=o.state("twisterjsDpxData"))&&(d=k.param(q));d===void 0&&(d=a.getQueryParams({psc:1}),d=k.extend(d,{parentAsin:DetailPage.StateController.getState().parent_asin}),d=k.map(d,function(e,a){return a+"="+e}).join("&"));f&&(g="/gp/twister/dimension?asinList="+f+"&isDimensionSlotsAjax=1&dimSubType="+b.dimSubType+"&dimType="+(Twister.multiDimensionWeblabEnabled?
"Dropdown":b.dimType)+(d?"&"+d:""));return g}function q(a){for(var c,b=0,g=a.length;b<g;b++)c=c+(b>0?",":"")+a[b];return c}function r(b,j,f){q(b);var b=i(b,f),g={};if(f.params)g.params=f.params;g.chunk=function(a,b){a&&(f.executeChunk===void 0?f.chunk(a,b):f.executeChunk()&&f.chunk(a,b),c.asinDimSumCache[a.ASIN]=a)};g.success=function(c,b,e,g){f.success&&a.typeChecker.isFunction(f.success)&&f.success(c,b,e,g)};g.error=function(c,b,e){f.error&&a.typeChecker.isFunction(f.error)&&f.error(c,b,e)};g.abort=
function(c){f.abort&&a.typeChecker.isFunction(f.abort)&&f.abort(c)};g.timeout=6E4;o.get(b,{success:function(a,c,e){g.success(a,c,e,j)},chunk:function(a){g.chunk(a,j)},error:function(a,c,e){g.error(a,c,e)},abort:function(a){g.abort(a)}})}var c=this,k=o.$;c.initData=b;c.scopePrefix="dpDimSum";c.symbolForTriggeringDim="*";c.uniqueID="";c.urlPrefix="";c.asinDataCache={};c.glanceViewSelectedDims="";c.currentDimCombOnGlance="";c.mapOfDimToAsinMaps={};c.mapOfAsinToDimMaps={};c.asinDimSumCache={};c.scope=
c.scopePrefix+"_"+c.initData.scopeSuffix;c.dimensionsList=c.initData.dimensionsList;c.dimensionValuesList=c.initData.dimensionValuesList;c.dimensionCombinationToASINMap=c.initData.dimensionCombinationToASINMap;m();c.fetchDimSumData=function(b){if(b.dimTriggeringDimSum&&a.typeChecker.isString(b.dimTriggeringDimSum))var j=b.dimTriggeringDimSum;else throw"Wrong parameter passes to DimSumModule "+c.scope;var f=c.dimensionsList.indexOf(j);if(b){if(!b.asinList||!a.typeChecker.isArray(b.asinList))throw"Wrong parameter passed to DimSumModule "+
c.scope;if(!b.chunk||!a.typeChecker.isFunction(b.chunk))throw"Wrong parameter passed to DimSumModule "+c.scope;}else throw error("No options for dimSum");j={dimIndexTriggeringDimSum:f};j.dimCombOnPage=m();var g=m(!0).slice(0);g[f]=c.symbolForTriggeringDim;f=g.join("_");j.hashKey=f;for(var d=b.asinList,f=[],g=[],k=0,e=d.length;k<e;k++){var q=d[k];q&&(!c.asinDimSumCache||!c.asinDimSumCache[q]?f.push(q):g.push(q))}d=[];d.asinListForServer=f;d.asinListForCache=g;d.asinListForServer.length>0&&r(d.asinListForServer,
j,b);if(d.asinListForCache.length>0){f=d.asinListForCache;d=0;for(k=f.length;d<k;d++)g=f[d],b.chunk(c.asinDimSumCache[g],j);f.length===b.asinList.length&&b.success(void 0,void 0,void 0,j)}}}});s.when("A","jQuery").register("detail-page-state-controller",function(){return function(){this.state={};this.getState=function(){return this.state};this.setState=function(o,l){o&&l&&(this.state[o]=l)}}});s.when("A","jQuery").register("detail-page-framework",function(){return{callbacks:{},registerCallback:function(o,
l,b){o!="after_redraw"&&o!="asin_select"||l!="sims-widget"&&l!="session-similarities"&&l!="purchase-similarities"&&l!="buyxgety"||(this.callbacks[l+"_feature_div"]=b)},registerFeature:function(){},registerFeatureConfig:function(){}}});s.when("A","twister-string-constants").register("twister-modal-resize-helper",function(o){return function(){function l(a,i){a.each(function(a,r){var c=d(r);if(r.className.indexOf(i)==-1){if(c.outerWidth()>b.width)b.width=c.outerWidth();if(c.outerHeight()>b.height)b.height=
c.outerHeight()}});return b}var b={width:0,height:0},a=this,d=o.$;a.getGlanceSwatchesInRow=function(a){var a=d("#twister_feature_div "+a),b=0,q=0;if(a.length>0)q=a.get(0).getBoundingClientRect().top,b++;for(var r=1,c=a.length;r<c;r++){var k=a.get(r).getBoundingClientRect();if(Math.abs(q-k.top)>5)break;else b++}return b};a.fixSize=function(b,i,q,r,c){b.removeClass("twisterSwatchWrapper");var k=l(b,r),h=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(c!=void 0){var j=
c.twisterModalDiv.outerWidth(),f=a.getGlanceSwatchesInRow(i),g=b.first().width(),g=f*(k.width-g);g>0&&f>0&&(newModalWidth=j+g,c.setModalWidth(newModalWidth))}b.addClass("twisterSwatchWrapper");Twister.isIE8()?(b.each(function(a,c){d(c).css({"min-height":k.height+"px","min-width":k.width+"px"})}),1100<h&&d("."+r).css({height:k.height+"px"})):d("#"+q).html(i+" { min-height:"+k.height+"px; min-width:"+k.width+"px; } ."+r+" { height: "+k.height+"px;}");a.resetBestSize()};a.resetBestSize=function(){b=
{width:0,height:0}}}});s.when("A","jQuery","twisterModule","dp-js-logger","page-refresh:controller","twister-controller","twister-state","twister-string-constants").register("detailPage:RefreshHandler",function(o,l,b,a,d,m,i,q){var r=window.twisterController.twisterModel.twisterState,c=new a("dpPageRegreshHandler"),k={},h=function(a){var b=this;b.clientId=a;b.doPageRefresh=function(g){if(!Array.isArray(g))throw"Incorrect parameters passed to doPageRefresh for clientId "+b.clientId;g=r.getRequestContextForExternalTwisterUpdates(g);
try{d.updatePage(g,q.EVENT_TYPE_CLICK)}catch(k){c.logFatal(k,{message:" Error doing page-refresh for clientId "+a})}};b.getURLParamObject=function(a,c,d){if(!a||d==null)throw"Incorrect parameters passed to getURLParams for clientId "+b.clientId;return{key:encodeURIComponent(a),value:encodeURIComponent(c),isPersistent:d}}};return{getHandlerInstance:function(a){if(a==null||a=="")throw"Incorrect clientID passed to getHandlerInstance of dpRefreshHandler";k[a]||(k[a]=new h(a));return k[a]}}});s.when("A",
"jQuery","detailPage:RefreshHandler","twister-string-constants").register("your-module-name",function(o,l,b){window.handleClickForMyButton=function(){for(var a=[],d="",m="",i=0,q=arguments.length;i<q;i++)m=arguments[i],i==0?d=b.getHandlerInstance(m):(m=d.getURLParamObject(m[0],m[1],m[2]),a.push(m));d.doPageRefresh(a)}});s.when("A","jQuery","dp-ajax-prefetch","detail-page-framework","dp-js-logger","twister-string-constants","page-refresh:meta-cache","page-refresh:page").register("page-refresh:controller",
function(o,l,b,a,d,m,i,q){var r=4E4,c=1,k="dpTwister",h=1,j={intermediateEOS:1,EOS:1},f=1500,g=new d("dpTwister");return new function(){function d(e,a){if(!(a.recordImpressionPending>c)){var b=a.impressionCallbackData&&a.impressionCallbackData.relatedRequestID,j="/gp/twister/impression.html/?relatedRequestID="+b;b?o.delay(function(){o.get(j,{success:function(){g.logCounter("dpTwisterImpression",1)},timeout:r,error:function(){g.logCounter("dpTwisterImpressionFailed",1)}})},f):g.logFatal("prefetchRequestId does not exists. twister prefetch ajax requests are not returning the metadata.");
a.recordImpressionPending++;i.set(e,a)}}function w(e,a,c){if(typeof a.forceFullPrefetch==="undefined")a.forceFullPrefetch=c||m.NO,i.set(e,a);return a.forceFullPrefetch===m.NO&&y.metadata[e.mType]&&!y.metadata[e.mType].fullyPrefetchable}function e(e,a){p(e,function(e){q.executeClientFeatures(e,a)})}function p(e,a){var c=[e];e.relatedContext&&c.push(e.relatedContext);l.each(c,function(e,c){a.apply(y,[c])})}function x(e,a){p(e,function(e){q.fadeInFeatures(e);var c=e.uniqueID,g=e.url;md=i.get(e);if(y.newPrefetchWeblab&&
md.prefetchSent&&w(e,md))c=c+"_prefetch_"+h,g=g+"&prefetchParam="+h,md.hotFeaturesPending=!0;md.requestSent=!0;i.set(e,md);var d=y.newPrefetchWeblab&&a===m.EVENT_TYPE_CLICK;b.getInstance(k,c,g,z,e,e.doNotAbort).getContent(d)})}var y=this;y.metadata={};y.newPrefetchWeblab=!1;y.page=q;var z={chunk:function(e,a){var c=e.ASIN,b=e.Value,g=e.FeatureName;if(!j[g]){var d=i.get(a);g==="twister-request-metadata"?(d.impressionCallbackData=o.parseJSON(b.content[g]),i.set(a,d)):q.refreshFeature(c,g,b)}},success:function(e,
a,c,g){e=i.get(g);if(e.hotFeaturesPending)e.hotFeaturesPending=!1,i.set(g,e),b.getInstance(k,g.uniqueID+"_prefetch_2",g.url+"&prefetchParam=2",z,g,g.doNotAbort).getContent();e.recordImpressionPending&&d(g,e)},error:function(e,a,c){Twister.$("#variations-overlay").hide();Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());g.logFatal(a+" "+c)},abort:function(e){g.logFatal(" Ajax aborted: "+e)},timeout:r};y.prefetchPage=function(e,a){p(e,function(e){var c=e.uniqueID,
g=e.url,d=i.get(e);if(!d.requestSent)w(e,d,a)&&(c=c+"_prefetch_"+h,g=g+"&prefetchParam="+h),d.prefetchSent=!0,d.recordImpressionPending=d.recordImpressionPending||1,d.requestSent=!0,i.set(e,d),b.getInstance(k,c,g,z,e,e.doNotAbort).prefetchContent()})};y.updatePage=function(c,b){if(b===m.EVENT_TYPE_CLICK||b===m.EVENT_TYPE_DROPDOWN_CHANGE){if(!c.partialState){if(a.callbacks["sims-widget_feature_div"])a.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());q.startMeasurement(c)}x(c,
b)}e(c,b)};y.init=function(e){y.newPrefetchWeblab=e.newPrefetchWeblab;l.each(e.contextMetaData,function(e,a){if(a.elementList){for(var c=a.elementList.length,b=!0,g=0;g<c;g++)if(!a.elementList[g].isPrefetchable){b=!1;break}y.metadata[e]||(y.metadata[e]={});y.metadata[e].fullyPrefetchable=b}});q.init(e)}}});s.when("A","jQuery","page-refresh-measurement","twister-string-constants","dp-js-logger").register("page-refresh:page",function(o,l,b,a,d){var m=new d("dpTwister");return new function(){var d=this;
d.measurement=void 0;d.config={partial:{},full:{},parent:{},master:{}};d.initializeMeasurement=function(a){var r=a.measurement;d.measurement=new b(l,r.atf.marker,r.cf.marker);d.measurement.init(a.storeID,a.productGroupID)};d.init=function(b){d.initializeMeasurement(b);l.each(b.contextMetaData,function(b,c){var k=[],h={},j=c.elementList||[],f=j.length;h[a.EVENT_TYPE_MOUSEOVER]={};h[a.EVENT_TYPE_CLICK]={};for(var g=0;g<f;g++){var q=l("#"+j[g].divToUpdate);k.push("#"+j[g].divToUpdate);q.length&&j[g].customClientFunction&&
(j[g].updateOnHover&&(h[a.EVENT_TYPE_MOUSEOVER][j[g].divToUpdate]=q.attr("customfunctionname")),h[a.EVENT_TYPE_CLICK][j[g].divToUpdate]=q.attr("customfunctionname"))}d.config[b].affectedFeatures=k.join(",");d.config[b].clientFeatures=h})};d.startMeasurement=function(a){this.measurement.start(a.newAsin)};d.fadeInFeatures=function(a){l(this.config[a.mType].affectedFeatures).css({opacity:0.5})};d.executeClientFeatures=function(b,r){l.each(d.config[b.mType].clientFeatures[r===a.EVENT_TYPE_CLICK||r===
a.EVENT_TYPE_DROPDOWN_CHANGE?a.EVENT_TYPE_CLICK:a.EVENT_TYPE_MOUSEOVER],function(a,k){try{eval("var twisterCustomFunction = "+k+";"),twisterCustomFunction(b.reactID,DetailPage.StateController,function(){d.measurement.stampImageLoad(b.newAsin)})}catch(h){m.logFatal(h)}})};d.refreshFeature=function(a,b,c){var d,h;try{b&&c&&c.content&&(h=c.content[b],typeof h!=="undefined"&&(d=l("#"+b),d.html(h),d.css({opacity:""})))}catch(j){b=b||"NoFeatureName",m.logFatal(j,{message:" Error in feature "+b})}this.measurement.stampFeature(b,
a)}}});s.when("twister-string-constants").register("page-refresh:meta-cache",function(o){return{data:{},set:function(l,b){var a=this.getKey(l);return a?this.data[a]=b:void 0},get:function(l){return this.data[this.getKey(l)]||{}},getKey:function(l){var b;l&&l.newAsin&&(b=l.mType===o.MTYPE_PARENT?l.mType+l.newAsin:l.mType===o.MTYPE_MASTER?l.mType+l.id:l.mType+l.newAsin+l.reactID);if(!b)throw"Twister PageRefresh::MetaCache:getKey incorrect context passed.";return b}}});s.when("A","jQuery").register("page-refresh-ajax-scope",
function(){return function(o,l,b){this.scopeName=l;this.url=b;ues("t0",l,window.newTwisterInteractionStartTime);ues("ctb",l,"1");this.signalMarker=function(a){this.markers[a]&&!(this.markers[a].conditions<=0)&&--this.markers[a].conditions===0&&typeof this.markers[a].handler=="function"&&this.markers[a].handler()};this.addlongPoleTag=function(a,b){a=a.toLowerCase();this.markers[a]&&this.markers[a].conditions==0&&this.markers[a].conditions==0&&window.ue&&typeof ue.tag==="function"&&ue.tag(b)};this.postData=
function(){var a=this.scopeName;o.ajax({url:this.url,dataType:"text",timeout:4E4,error:function(){},success:function(b){ues("id",a,b);uex("ld",a)}})};var a=this;this.markers={image:{conditions:1,handler:function(){uet("ne",l);a.signalMarker("af")}},af:{conditions:Twister.atfMarkerCount?Twister.atfMarkerCount:2,handler:function(){uet("af",l);uet("cf",l);a.signalMarker("cf")}},cf:{conditions:Twister.cfMarkerCount?Twister.cfMarkerCount:2,handler:function(){uet("cf",l);a.postData()}}}}});s.when("A","jQuery").register("page-refresh-cache",
function(){return function(){this.data={};this.getValue=function(o,l){return this.data[o]==null?null:l?this.data[o][l]:this.data[o]};this.setValue=function(o,l,b){if(this.data[o]==null||this.data[o].pending)this.data[o]={};this.data[o][l]=b};this.clear=function(o){this.data[o]=null}}});s.when("A","jQuery","page-refresh-refresh","page-refresh-measurement","page-refresh-model","detail-page-framework").register("page-refresh-manager",function(o,l,b,a,d,m){return function(i,q,r,c,k){this.$=i;this.model=
{};this.refresh=new b(i,c,k);this.contextMetaData=q;this.measurement=new a(i,r.atfMarker,r.cfMarker);this.init=function(a,c){for(var b in this.contextMetaData)this.model[b]=new d(i,this.contextMetaData[b].AJAXUrl,this.contextMetaData[b].elementList,b.toString());this.measurement.init(a,c)};this.getModelCacheSize=function(a){var c=0;this.model.hasOwnProperty(a)&&i.each(this.model[a].cache.data,function(a,b){b.hasOwnProperty("cacheStatus")&&(b.cacheStatus==="preFetched"||b.cacheStatus==="completeFetched")&&
c++});return c};this.react=function(a,c){for(var b in this.model)c||this.model[b].finishAjaxCall(this.model[b].currentRequestId,1);b=0;for(var g=a.length;b<g;b++){var d=a[b];c||this.model[d.type].finishAjaxCall(this.model[d.type].currentRequestId,2);this.refresh.startRefresh(this.model[d.type].getUpdateData(this,d));this.model[d.type].makePendingCallBacks()}};this.pageRefreshHandler=function(a,c,b,g){if(!g.noRefresh)for(var d in g.content)try{this.refresh.doRefresh(d,g.content[d]);if(b.isFinishRefreshReq)if(this.refresh.finishRefresh(d),
d=="session-similarities_feature_div"||d=="purchase-similarities_feature_div"||d=="buyxgety_feature_div"){if(m.callbacks[d])m.callbacks[d]()}else d==="zeroes-buy-box_feature_div"&&Twister.isIEBrowser(i)&&i("#"+d).css({opacity:"",zoom:1});this.measurement.stampFeature(c,a)}catch(k){}}}});s.when("A","jQuery","page-refresh-ajax-scope").register("page-refresh-measurement",function(o,l,b){return function(a,d,m){this.atfMarker=d;this.cfMarker=m;this.scopeCount={};this.ajaxScopes={};this.url="";this.init=
function(a,b){this.url="/gp/twister/dynamic-update/ajax-measurement.html/?s="+a+"&pgid="+b+"&deviceType="+Twister.deviceType;Twister.isInstaTwisterEnabled&&(this.url+="&ptd="+Twister.productTypeName)};this.start=function(d){if(window.ue){this.scopeCount[d]||(this.scopeCount[d]=0);var q=d+(this.scopeCount[d]+1);this.scopeCount[d]++;this.ajaxScopes[d]=new b(a,q,this.url)}};this.stampImageLoad=function(a){this.ajaxScopes[a]&&(this.ajaxScopes[a].signalMarker("image"),Twister.cfImageLongPollTag&&this.ajaxScopes[a].addlongPoleTag("cf",
Twister.cfImageLongPollTag))};this.stampFeature=function(a,b){this.ajaxScopes[b]&&(a===this.atfMarker&&this.ajaxScopes[b].signalMarker("af"),a===this.cfMarker&&(this.ajaxScopes[b].signalMarker("cf"),Twister.cfHtmlLongPollTag&&this.ajaxScopes[b].addlongPoleTag("cf",Twister.cfHtmlLongPollTag)))};this.stampCustomMetrics=function(a,b){this.ajaxScopes[b]&&uet(a,this.ajaxScopes[b].scopeName)}}});s.when("A","jQuery","page-refresh-cache").register("page-refresh-model",function(o,l,b){return function(a,d,
m,i){this.$=a;this.pendingCallBacks={};this.pendingCallBacksASIN="";this.cache=new b;this.AJAXUrl=d;this.AJAXRequests={};this.requestIdHash={};this.elementList=m;this.currentRequestId=null;this.pendingCallbacksList={};this.immediateCallbacksList=[];this.elementsToRefresh=[];this.modelType=i;this.getNewRequestId=function(){for(var a=0;a<100;a++){var b=a.toString();if(!this.requestIdHash.hasOwnProperty(b))return this.requestIdHash[b]=!0,b}};this.removeRequestId=function(a){typeof a!="string"&&(a=a.toString());
this.requestIdHash.hasOwnProperty(a)&&delete this.requestIdHash[a]};this.executeActionItems=function(a,b,c,d,h){for(var c=c.divToUpdate,j=0,f=a.length;j<f;j++){var g=a[j];if(g=="addToImmediate")g={},g.id=b,g.key=c,this.immediateCallbacksList.push(g);else if(g=="addToElementsRefresh"||g=="addToElementsRefreshWithLoading")h.push(c+(g=="addToElementsRefreshWithLoading"?",loadingBar":""));else if(g=="updateCache")g={handler:this,callbackType:"updateCache"},this.addToPendingCallbacksList(b,c,g);else if(g==
"customClientFunction"){var g={handler:this,callbackType:"customClientFunction"},i={};i.refreshHandler=d;g.callbackParams=i;this.addToPendingCallbacksList(b,c,g)}else if(g=="doRefreshAndFinish"||g=="doRefresh")g={},g.handler=d,g.callbackType="doRefresh",i={isFinishRefreshReq:1},g.callbackParams=i,this.addToPendingCallbacksList(b,c,g)}};this.getAjaxCallContext=function(a,b,c,d,h,j){var b=[],f=h=0,g="notFetched";this.cache.getValue(a,"cacheStatus")&&(g=this.cache.getValue(a,"cacheStatus"));for(var i=
0,w=this.elementList.length;i<w;i++){var e=this.elementList[i],p=e.divToUpdate,m=[],y=1,l=0,C=0,n=0;e.isPrefetchable=="0"&&(y=0,f=1);e.customClientFunction=="1"&&(l=1,y=0);e.updateOnHover=="1"&&(C=1);e.loadingBar=="1"&&(n=1);if(!j||C){if(c)if(l||!y||this.cache.getValue(a,p))continue;else m.push("updateCache"),h||(h=1);else l?(m.push("customClientFunction"),m.push("addToImmediate")):this.cache.getValue(a,p)?(m.push("doRefresh"),m.push("addToImmediate")):(m.push("updateCache"),m.push("doRefreshAndFinish"),
n?m.push("addToElementsRefreshWithLoading"):m.push("addToElementsRefresh"),h||(h=1));if((c==1&&g=="preFetched"||c==0&&g=="completeFetched"||c==1&&g=="completeFetched")&&h==1)h=0;this.executeActionItems(m,a,e,d,b)}}if((c==1&&g=="preFetched"||c==0&&g=="completeFetched"||c==1&&g=="completeFetched")&&h==1)h=0;j&&h&&(h=0);h&&this.cache.setValue(a,"cacheStatus",c?f?"preFetching":"completeFetching":g=="preFetched"?"hotFeaturesFetching":"completeFetching");a={};a.isAjaxCallReq=h;a.elementsToRefresh=b;return a};
this.getUpdateData=function(a,b){for(var c=b.idList,d=[],h=[],j=[],f=[],g=0,m,w,e,p,i,y=1,l=0,C=c.length;l<C;l++){w=c[l].id;e=c[l].asin;p=c[l].isPrefetch;m=c[l].requiredDivs;m=this.getAjaxCallContext(w,e,p,a,m,c[l].isHover);i=m.elementsToRefresh;for(var n=0,o=i.length;n<o;n++)f.push(i[n]);if(m.isAjaxCallReq){g=1;p=p?1:this.cache.getValue(w,"cacheStatus")=="hotFeaturesFetching"?2:0;if(p==0||p==2)y=0;h.push(w);j.push(e);d.push(p)}}if(g){c={};c.asinList=j.join(",");c.id=h.join(",");c.prefetchParam=d.join(",");
c.managerHandler=a;c.modelType=this.modelType;c.containsOnlyPrefetches=y;try{this.doAjaxCall(c)}catch(A){}}this.elementsToRefresh=f.slice();return f};this.makeCallback=function(a,b,c,d){var h=c.handler,j=c.callbackType,c=c.callbackParams;d==null&&(d=this.cache.getValue(a,b));if(typeof h=="function")h(a,b,c,d);else if(j=="doRefresh")h.pageRefreshHandler(a,b,c,d);else if(j=="customClientFunction")try{h.callCustomClientFunction(a,b,c,d)}catch(f){}else j=="updateCache"&&h.updateCache(a,b,c,d)};this.makePendingCallBacks=
function(a,b,c){var d;if(a){if(typeof this.pendingCallbacksList[a]==="object")if(b){d=this.pendingCallbacksList[a][b];if(!d){d=[];var h={handler:this,callbackType:"updateCache"};d.push(h)}for(var j=0,f=d.length;j<f;j++){h=d[j];try{this.makeCallback(a,b,h,c)}catch(g){}}this.pendingCallbacksList[a][b]&&delete this.pendingCallbacksList[a][b]}else{for(h in this.pendingCallbacksList[a]){d=this.pendingCallbacksList[a][h];j=0;for(f=d.length;j<f;j++)this.makeCallback(a,b,callbackargs,c)}delete this.pendingCallbacksList[a]}}else{a=
0;for(f=this.immediateCallbacksList.length;a<f;a++)b=this.immediateCallbacksList[a],this.makePendingCallBacks(b.id,b.key,null);this.immediateCallbacksList=[]}};this.addToPendingCallbacksList=function(a,b,c){this.pendingCallbacksList.hasOwnProperty(a)||(this.pendingCallbacksList[a]={});this.pendingCallbacksList[a].hasOwnProperty(b)||(this.pendingCallbacksList[a][b]=[]);this.pendingCallbacksList[a][b].push(c)};this.doAjaxCall=function(a){Twister.useVariationsOverlay&&Twister.remainingAjaxCalls===0&&
Twister.$("#variations-overlay").show();Twister.remainingAjaxCalls+=1;var b=this.getNewRequestId();this.currentRequestId=b;var c=a.managerHandler,d=this.AJAXUrl+a.asinList+"&isFlushing=2&id="+a.id+"&prefetchParam="+a.prefetchParam+"&mType="+a.modelType;Twister.isInstaTwisterEnabled&&(d+="&dpEnvironment="+Twister.dpEnvironment);var h={};if(Twister.useAuiAjax){var j=this,d=Twister.A.ajax(d,{method:"get",chunk:function(a){j.AJAXHandler(null,a,AJAXFlushUtils.ajaxReadyState.LOADING)},success:function(){j.AJAXHandler(null,
null,AJAXFlushUtils.ajaxReadyState.DONE);Twister.remainingAjaxCalls-=1;Twister.remainingAjaxCalls===0&&Twister.$("#variations-overlay").hide()},error:function(){Twister.$("#variations-overlay").hide();Twister.remainingAjaxCalls-=1;Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());Twister.printConsoleLogs&&console.logs("ajax call failed")},timeout:4E4});h.streamingXhrRef=d}h.ajaxParams=a;h.managerHandler=c;this.AJAXRequests[b]=h};this.abortAllAjaxCalls=function(){for(requestId in this.requestIdHash)this.finishAjaxCall(requestId,
!0)};this.finishAjaxCall=function(a,b){if(a){var c=this.AJAXRequests[a],d=c.streamingXhrRef,h=c.ajaxParams,c=h.id.split(","),h=h.containsOnlyPrefetches;if(!(b==1&&h)){this.pendingCallbacksList={};this.immediateCallbacksList=[];if(b){d&&typeof d.abort==="function"&&d.abort(AJAXFlushUtils.ajaxHandlerCode.ABORT);d=0;for(h=c.length;d<h;d++)if(this.cache.getValue(c[d])){var j=this.cache.getValue(c[d],"cacheStatus");j=="preFetching"||j=="completeFetching"?b?this.cache.clear(c[d]):this.cache.setValue(c[d],
"cacheStatus",j=="preFetching"?"preFetched":"completeFetched"):j=="hotFeaturesFetching"&&this.cache.setValue(c[d],"cacheStatus",b?"preFetched":"completeFetched")}}this.elementsToRefresh=[];this.removeRequestId(a);delete this.AJAXRequests[a];this.currentRequestId=null}}};this.updateCache=function(a,b,c,d){b=="intermediateEOS"||b=="EOS"?(b=this.cache.getValue(a,"cacheStatus"),b=="preFetching"?this.cache.setValue(a,"cacheStatus","preFetched"):(b=="completeFetching"||b=="hotFeaturesFetching")&&this.cache.setValue(a,
"cacheStatus","completeFetched")):this.cache.setValue(a,b,d)};this.callCustomClientFunction=function(b,d,c){var k=a("#"+d).attr("customFunctionName");if(k){var h=c.refreshHandler,j=DetailPage.StateController.getState().current_asin,f=function(){h.measurement.stampImageLoad(j)},c=Twister.useAui?f:null;if(k=Twister.useAui?eval("var customFunction = "+k+"; customFunction")(b,DetailPage.StateController,c):eval(k)(b,DetailPage.StateController,c)){c={isFinishRefreshReq:0};if(!Twister.useAui){var g;if(d==
"twister-main-image"&&j){g=document.getElementById("main-image");if(!g){var m=document.getElementById("main_image_0");m&&(g=(g=m.getElementsByTagName("img"))?g[0]:null)}if(g)g.onload=f}}h.pageRefreshHandler(b,d,c,k);Twister.useAui||navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&g&&g.complete&&f()}}};this.AJAXHandler=function(a,b,c){if(c==AJAXFlushUtils.ajaxReadyState.DONE)return this.finishAjaxCall(this.currentRequestId,0),AJAXFlushUtils.ajaxHandlerCode.OK;for(a=0;a<1;a++){var d=b,c=d.ASIN,
b=d.Value,d=d.FeatureName;d=="intermediateEOS"||d=="EOS"?this.updateCache(c,d,null,b):this.makePendingCallBacks(c,d,b)}return AJAXFlushUtils.ajaxHandlerCode.OK};this.AJAXErrorHandler=function(a,b,c){(a=a.xhrStatus)||(a=c);return a}}});s.when("A","jQuery").register("page-refresh-refresh",function(){return function(o,l,b){this.$=o;this.loadingBarHtml=l;this.loadingBarHtml2=b;this.doRefresh=function(a,b){o("#"+a).html(b)};this.startRefresh=function(a){if(a)for(var b=0,m=a.length;b<m;b++){var i=a[b].split(","),
l=i[0],r=!0,c=!1;if(l=="buy-box_feature_div"||l=="more-buying-choices_feature_div"||l=="session-similarities_feature_div"&&o.browser.msie)r=!1;i.length>1&&i[1]=="loadingBar"&&(c=!0);r&&!Twister.useVariationsOverlay&&o("#"+l).css("opacity","0.5");c&&this.appendLoadingBar(l)}};this.appendLoadingBar=function(a){var b=o("#"+a);a!="moreBuyingChoices_feature_div"&&!b.attr("loadingBarSet")&&(b.attr("loadingBarSet","1"),a=="more-buying-choices_feature_div"?(b=o("#more-buying-choice-content-div"),b.html(this.loadingBarHtml2)):
(a=b.find("h2, h1, b"),a.length>0&&(a=o(a[0]),a.css({display:"inline",padding:"0px"}),a.after(o(this.loadingBarHtml)))))};this.finishRefresh=function(a){var b=!0,m=!0;a=="buy-box_feature_div"&&(m=b=!1);if(a=="session-similarities_feature_div"&&o.browser.msie||a=="more-buying-choices_feature_div")b=!1;var i="0";a=="more-buying-choices_feature_div"&&(i="1");b&&o("#"+a).css({opacity:"",zoom:i});m&&o("#"+a).removeAttr("loadingBarSet")}}});s.when("A").register("evdd-utils",function(){return function(){this.PopulateEVDD=
function(o,l,b,a){var d={},m,i;for(m in o)i=b[m],typeof i!="undefined"&&(masterDimValIndex=i[0],slaveDimValIndex=i[1],a==masterDimValIndex&&(d[slaveDimValIndex]=o[m]));typeof l.dimensionViewHandlersMap[1].updateViewWithPriceInfo==="function"&&l.dimensionViewHandlersMap[1].updateViewWithPriceInfo(d)}}});s.when("A","jQuery","dp-js-logger").register("dp-ajax-prefetch-metrics",function(o,l,b){function a(a){this.scope="dpPre"+a;this.data={}}new b("PrefetchMetrics");a.prototype._count=function(a,b){var i=
this.scope+a,l;window.ue&&window.ue.count&&(l=typeof b!=="undefined"?(l=ue.count(i,b))||b:(l=ue.count(i))||0);return l};a.prototype._incrementCounter=function(a){this._count(a,(this._count(a)||0)+1)};a.prototype._record=function(a,b,i){this.data[b]=this.data[b]||{};if(!this.data[b][a])this.data[b][a]=i||(new Date).getTime(),a=="predicted"?this._incrementCounter("Predicted"):a=="selected"&&this.data[b].predicted?(a=this.data[b].selected-this.data[b].predicted,this.data[b].lookahead=a,this._incrementCounter("PredictedSelect"),
this._count("LookAhead"+this._count("PredictedSelect"),a),this._count("LookAhead",a)):a=="selected"&&!this.data[b].predicted&&this._incrementCounter("UnpredictedSelect")};a.prototype.setCounter=function(a,b){this._count(a,b)};a.prototype.predicted=function(a,b){this._record("predicted",a,b)};a.prototype.selected=function(a,b){this._record("selected",a,b)};a._allInstances={};a.getInstance=function(b){if(!b)throw"Undefind scope. scope is a required parameter";a._allInstances[b]||(a._allInstances[b]=
new a(b));return a._allInstances[b]};return a});s.when("A").register("scroll-event-handler",function(o){return function(l,b,a){if(b){var d=o.$,m,i=(new Date).getTime();d(b).bind("scroll",function(b){var d=Date.now();m&&d-i<l&&clearTimeout(m);i=d;m=setTimeout(function(){a(b)},l)})}}});s.when("A","twister-utils","twister-string-constants","twister-legacy-popover").register("twister-beaconized-evdd",function(o,l,b){return function(a,d){function m(){var a=8+h(j).height(),a={localContent:f,location:"bottom",
showOnHover:!1,showCloseButton:!1,skin:null,clone:!1,controlCallbacks:!0,locationOffset:[-2,-a],closeEventInclude:"CLICK_OUTSIDE",forceAlignment:!0,group:"DonsBoxDropDowns",width:null};e=h(j).amazonPopoverTrigger(a);h(document).bind("touchend click",function(){e.amznPopoverHide()})}function i(a){a=a.currentTarget.id.split("_");twisterController.handleClick({dimIndex:k.dimOrder,dimValueIndex:a[a.length-1]});return!1}function q(a){h(a.currentTarget).addClass(D)}function r(a){h(a.currentTarget).removeClass(D);
return!1}function c(a){h(a.currentTarget).removeClass(D);i(a);return!1}var k=this,h=o.$,j,f,g,D="evdd-row-hovered",w,e,p={};k.dimType="evdd";k.isMasterDim=!1;k.updateView=function(a){var b=l.getDimStyleData(a.dimCombID,k.dimValuesDisplayData.length,k.dimOrder,k.twisterControllerHandle.twisterAvailabilityCache,k.displayConfigStylesData),c,d,f,i=-1,a=0,i="";e.amznPopoverHide();for(var m=0,q=b.length;m<q;m++)c=b[m],d=p[c.style],f="#"+k.dimName+"_"+m,d==="evdd-row-selected"&&(i=m,i=k.dimValuesDisplayData[i]),
(c.style==="available"||c.style==="selected")&&a++,$rowElement=h(f),$rowElement.removeClass(w).addClass(d),$rowElement.find(".evdd-row-snake-wrapper").show(),$rowElement.find(".evdd-row-price-info-wrapper").html(""),$rowElement.find(".evdd-row-prime-badge-wrapper").html("");b=!1;!k.isMasterDim&&a===1&&(b=!0);a=b;h(j).find("button").text(i);h(g).text(i);a?(h(j).addClass("evdd-hidden"),h(g).removeClass("evdd-hidden")):(h(g).addClass("evdd-hidden"),h(j).removeClass("evdd-hidden"))};k.updateViewWithPriceInfo=
function(a){var e,b,c;for(e in a)b=a[e],c="#"+k.dimName+"_"+e,c=h(c),c.find(".evdd-row-snake-wrapper").hide(),c.find(".evdd-row-price-info-wrapper").html(b[2]),c.find(".evdd-row-prime-badge-wrapper").html(b[3])};(function(){var a;k.dimOrder=d[b.STRING_DIM_ORDER];k.dimName=d[b.STRING_DIM_NAME];k.dimensionsMap=d[b.STRING_DIMENSIONS_MAP];k.dimNameDisplayString=d[b.STRING_DIMENSION_DISPLAY_STRING];k.dimValuesDisplayData=d[b.STRING_DIMENSION_VALUES_DATA];k.displayConfigStylesData=d[b.STRING_DISPLAY_CONFIG_STYLES_DATA];
k.twisterControllerHandle=d[b.STRING_TWISTER_CONTROLLER_HANDLE];k.initialTwisterState=d[b.STRING_TWISTER_INITIAL_STATE_KEY];a=k.initialTwisterState.getCurrentDimCombID();k.dimData=l.getDimStyleData(a,k.dimValuesDisplayData.length,k.dimOrder,k.twisterControllerHandle.twisterAvailabilityCache,k.displayConfigStylesData);k.isMasterDim=!1;if(k.dimOrder==="0")k.isMasterDim=!0;k.dimNameDisplayString=d[b.STRING_DIMENSION_DISPLAY_STRING];j="#evdd-button-"+k.dimName;f="#evdd-table-wrapper-"+k.dimName;g="#evdd-singleton-"+
k.dimName;p.invalid=k.isMasterDim?"evdd-row-default":"evdd-row-hidden";p.available="evdd-row-default";p.selected="evdd-row-selected";w=["evdd-hidden",D,"evdd-row-hidden evdd-row-default evdd-row-selected"].join(" ");m();for(var e=0,z=k.dimData.length;e<z;e++)a="#"+k.dimName+"_"+e,h(a).bind("click",i).bind("touchend",c).bind("touchstart",q).bind("mouseenter",q).bind("mouseleave",r)})()}});s.when("A","twister-variations-data","twister-view","twister-model","twister-model-new","twister-state","twister-availabilty-cache",
"twister-utils","evdd-utils","twister-logger").register("twister-controller",function(o,l,b,a,d,m,i,q,r,c){return function(k,h){var j=this,f=o.$;j.logger=new c(f,this);j.logger.init();j.twisterJSInitData=h;j.pageRefreshRefactor=h.pageRefreshRefactor;j.twisterVariationsData=new l(h);j.twisterAvailabilityCache=new i(j.twisterVariationsData);j.initTwisterState=new m(h,j.twisterVariationsData,j.twisterAvailabilityCache);j.twisterView=new b(j,j.initTwisterState,h,j.twisterVariationsData,j.twisterAvailabilityCache);
j.twisterModel=j.pageRefreshRefactor?new d(j,h,j.twisterVariationsData):new a(j,k,h,j.twisterVariationsData,j.twisterAvailabilityCache);(function(){f(".variations .swatchOuter a").each(function(){var a=jQuery(j).contents();f(j).replaceWith(a)});if(typeof TwisterNonJs!=="undefined")for(var a=TwisterNonJs.handleDropDown.length,b=0;b<a;b++)TwisterNonJs.handleDropDown[b]=function(){};f("#twister .swatches a").remove();f("#twisterNonJsData").html("");j.jsInteractionEnabledTime=Date.now()})();j.populateEVDD=
function(a){var b=this.twisterView,c=this.twisterVariationsData.asinToDimIndexMapData,e=this.twisterModel.twisterState.getMaster();a&&(new r).PopulateEVDD(a,b,c,e)};j.handleClick=function(a){this.divMetaData=a;var b=j.initTwisterState.getCurrentDimCombID(),b=q.reconstructCombinationWithDimValue(b,a.dimIndex,a.dimValueIndex);window.newTwisterInteractionStartTime=new Date;window.ue&&ue.tag&&ue.tag("twisterSwatchClick");if(this.twisterVariationsData.useMS||!q.isSwatchSelected(a,j.twisterVariationsData))this.enableMouseOut=
0,this.twisterModel.handleClick(a),j.twisterAvailabilityCache.isDimCombinationAvailable(b)||j.logger.logImpression(j.logger.eventTypes.CLICK_NA,null)};j.handleClickPrediction=function(a,b){this.twisterModel.prefetch(a,b)};j.handleMouseOver=function(a){if(typeof touchDeviceDetected!="undefined"&&touchDeviceDetected)return this.handleClick(a),!0;this.enableMouseOut=1;this.twisterModel.handleMouseOver(a);return!0};j.handleMouseOut=function(a,b,c){this.enableMouseOut===1&&this.twisterModel.handleMouseOut(a,
b,c)};j.handleDropdownOnChange=function(a,b){b.dimValueIndex=parseInt(a.value.split(",")[0]);window.newTwisterInteractionStartTime=new Date;window.ue&&ue.tag&&ue.tag("twisterDDClick");this.twisterModel.twisterState.setPreHoverData(b);this.twisterModel.handleDropdownChange(b)}}});s.when("A","twister-counter","twister-vodd","twister-beaconized-evdd","twister-native-evdd","twister-dimension-views-swatch","twister-dimension-views-dropdown","twister-IMDD","twister-dimension-views-singleton","twister-string-constants").register("twister-dimension-view-factory",
function(o,l,b,a,d,m,i,q,r,c){var k=o.$;return{getDimensionSubViewObject:function(h,j,f,g,o){var w,e=h.dimensionsDisplayType[f],p=h.dimensionsDisplaySubType[f],x=h.dimensions[f],y=h.dimensions,z=h.dimensionsDisplay[f],C=k.isArray(Twister.isSlotsEnabled)?Twister.isSlotsEnabled[f]:Twister.isImmersiveViewEnabled;dimensionValuesData=j.dimensionValuesData[f];displayConfigStylesData=j.displayConfigStylesData[e];maxSwatchesForImmersiveView=h.maxSwatchesForImmersiveView[f];e===c.TWISTER_DIMENSION_VIEW_SWATCH?
w=m:e===c.TWISTER_DIMENSION_VIEW_DROPDOWN?w=C?q:i:e===c.TWISTER_DIMENSION_VIEW_SINGLETON?w=r:e===c.TWISTER_DIMENSION_VIEW_EVDD?w=k("html").hasClass("a-lt-ie8")?d:a:e===c.TWISTER_DIMENSION_VIEW_VODD?w=b:e===c.TWISTER_DIMENSION_VIEW_COUNTER&&(w=l);j=maxSwatchesForImmersiveView;e={};e[c.STRING_DIM_ORDER]=f;e[c.STRING_DIM_NAME]=x;e[c.STRING_DIMENSIONS_MAP]=y;e[c.STRING_DIMENSION_DISPLAY_STRING]=z;e[c.STRING_DIMENSION_VALUES_DATA]=dimensionValuesData;e[c.STRING_DISPLAY_CONFIG_STYLES_DATA]=displayConfigStylesData;
e[c.STRING_TWISTER_CONTROLLER_HANDLE]=g;e.isImmersiveViewEnabled=k.isArray(Twister.isImmersiveViewEnabled)?Twister.isImmersiveViewEnabled[f]:Twister.isImmersiveViewEnabled;e.isSlotsEnabled=k.isArray(Twister.isSlotsEnabled)?Twister.isSlotsEnabled[f]:Twister.isImmersiveViewEnabled;e[c.STRING_TWISTER_INITIAL_STATE_KEY]=o;e[c.STRING_MAX_SWATCHES_IMMERSIVE_VIEW]=j;e.dimensionDisplaySubType=p;return new w(h,e)}}});s.when("twisterModule").execute(function(){typeof setCSMReq==="function"&&setCSMReq("x2");
typeof uex==="function"&&typeof uet==="function"&&(uet("be","TwisterAUIWait",{wb:1}),uex("ld","TwisterAUIWait",{wb:1}))});s.when("A","cf","twister-js-init-mason-data","twister-js-init-dpx-data","twister-controller","page-refresh-manager","dimensional-summary-module").execute(function(o,l,b,a,d,m,i){function q(){typeof amznJQ!="undefined"?amznJQ.declareAvailable("newTwister"):s.register("newTwister",function(){return window.newTwister});s.register("twisterModule",function(){return{getState:function(){return DetailPage.StateController.getState()}}});
typeof amznJQ!="undefined"?(amznJQ.declareAvailable("pageRefreshJS"),amznJQ.declareAvailable("dpf")):(s.register("pageRefreshJS",function(){return window.pageRefreshJS}),s.register("dpf",function(){return window.pageRefreshJS}))}function r(a){var b={};a.extend(b,{ajaxReadyState:{NONE:-1,UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},ajaxHandlerCode:{OK:0,IGNORE:1,RETRY:2,RELOAD:3,TIMEOUT:4,ABORT:5,FATAL:6,INVALID_RESP:7,INCOMPLETE_RESP:8,PAGELET_FATAL:9,DEBUG_NOAJAX:10},serverCode:{ERROR:-1,
OK:200,TIMEOUT:408},shouldReload:function(){return!1}});window.AJAXFlushUtils=b}window.Twister={};var c=window.Twister;c.$=o.$;c.DimensionViews={};o.on.ready(function(){c.A=o;if(!o.$.isEmptyObject(a)){var k=a.updateDivLists;c.dpEnvironment=a.dpEnvironment;c.isInstaTwisterEnabled=!0;c.productTypeName=b.productTypeName;c.isImmersiveViewEnabled=a.isImmersiveViewEnabledOnDim?a.isImmersiveViewEnabledOnDim:a.isImmersiveViewEnabled;c.isSlotsEnabled=a.isSlotsEnabled;c.isImmersiveViewEnabledOnPage=a.isImmersiveViewEnabled;
c.isImmersiveExperience=a.isImmersiveExperience?a.isImmersiveExperience:a.isImmersiveViewEnabled;c.multiDimensionWeblabEnabled=a.multiDimensionWeblabEnabled?a.multiDimensionWeblabEnabled:!1;c.immersivePartialStateMessage=a.immersivePartialStateMessage?a.immersivePartialStateMessage:"";c.immersiveFullySelectedStateMessage=a.immersiveFullySelectedStateMessage?a.immersiveFullySelectedStateMessage:"";c.immersiveBannersPresent=a.immersiveBannersPresent?a.immersiveBannersPresent:!1;var h=b.contextMetaData,
j=h.full,f=h.master,g=h.parent,h=h.partial;b.dimensionSelectionData=a.dimensionSelectionData;b.dimensionsDisplayType=a.dimensionsDisplayType;b.dimensionsDisplaySubType=a.dimensionsDisplaySubType?a.dimensionsDisplaySubType:[];b.ajaxUrlParams=a.ajaxUrlParams;b.displayTypeProperties=a.displayTypeProperties?a.displayTypeProperties:[];b.maxSwatchesForImmersiveView=a.maxSwatchesForImmersiveView?a.maxSwatchesForImmersiveView:[];b.expandedViewEnabled=a.expandedViewEnabled?a.expandedViewEnabled:[];b.minAsinForExpandedView=
a.minAsinForExpandedView?a.minAsinForExpandedView:[];b.minAsinForExpandedScroll=a.minAsinForExpandedScroll?a.minAsinForExpandedScroll:[];if(typeof a.twisterUpdateURLAppend!=="undefined"){var l=b.twisterUpdateURLInfo,w=l.immutableURLPrefix,e=l.immutableParams,p=a.twisterUpdateURLAppend.immutableParams,x;for(x in p)if(typeof p.hasOwnProperty!=="function"||p.hasOwnProperty(x))w+=(w.indexOf("?")==-1?"?":"&")+x+"="+p[x],e[x]=p[x];l.immutableURLPrefix=w}if(a.shouldUseDPXTwisterData)b.dimToAsinMapData=a.dimensionToAsinMap,
b.asinToDimIndexMapData=a.asinToDimensionIndexMap,b.dimensionValuesData=a.dimensionValuesData,b.variation_values=a.variationValues,b.asin_variation_values=a.asinVariationValues,b.reactId=a.reactId,b.currentDimCombID=a.currentDimensionCombinationId,b.selected_variation_values=a.selectedVariationValues;k.full!=null&&(j.elementList=j.elementList!=null?k.full.concat(j.elementList):k.full);k.master!=null&&(f.elementList=f.elementList!=null?k.master.concat(f.elementList):k.master);k.parent!=null&&(g.elementList=
g.elementList!=null?k.parent.concat(g.elementList):k.parent);k.partial!=null&&(h.elementList=h.elementList!=null?k.partial.concat(h.elementList):k.partial)}k=b.isTablet;window.twisterInitPrefetchMode=b.twisterInitPrefetchMode;window.jqupgrade=b.jqupgrade;c.useDropdownThumbnail=k;c.useVariationsOverlay=k;c.showErrorMessageOnFailure=k;c.remainingAjaxCalls=0;c.errorMessageOnFailure="We are sorry.  Amazon has encountered an error.  Please try again.";c.isLoggingEnabled=b.isLoggingEnabled;c.printConsoleLogs=
b.printConsoleLogs;c.deviceType=b.deviceType;c.useAui=1;c.useAuiAjax=1;k=b.measurement.atf.marker;c.atfMarkerCount=b.measurement.atf.count;j=b.measurement.cf.marker;c.cfMarkerCount=b.measurement.cf.count;c.cfImageLongPollTag=b.measurement.cf.longPollImageTag;c.cfHtmlLongPollTag=b.measurement.cf.longPollHtmlTag;k=new m(o.$,b.contextMetaData,{atfMarker:k,cfMarker:j,logChannel:"twister"},b.loadingBarHtml,b.loadingBarHtml2);window.twisterController=new d(k,b);k={};k.dimensionsList=b.dimensions;k.dimensionValuesList=
b.dimensionValuesData;k.dimensionCombinationToASINMap=b.dimToAsinMapData;k.scopeSuffix="twister";c.dimensionalSummaryModule=new i(k);r(o.$);q()});c.isIEBrowser=function(a){return a.browser.msie||!!navigator.userAgent.match(/Trident/)};c.isIE8=function(){var a=c.A.$;return a("html").hasClass("a-lt-ie9")};return c});s.when("A","twister-state","twister-utils","detail-page-framework","twister-string-constants").register("twister-model",function(o,l,b,a){return function(d,m,i,l,r){function c(a){var b,
c,e,d,j,h=f.twisterState.parentASIN,i;a?(b=f.twisterState.reactId,c=f.twisterState.hoveredReactId,e=f.twisterState.unselectedDimCount,d=f.twisterState.hoveredDimCombID.search(/X/)>=0?1:0,j=f.twisterState.hoveredAsin):(b=f.twisterState.previousReactId,c=f.twisterState.reactId,e=f.twisterState.previousPartialState,d=f.twisterState.partialState,j=f.twisterState.getCurrentASIN());i=f.twisterVariationsData.asinToDimIndexMapData[j];f.twisterVariationsData.useMS&&i&&j&&k(f.fetchMasterIDList,"m"+i[0],j,0,
a);d===0?(k(f.fetchFullIDList,j,j,0,a),f.prioritizeReqPrefetch=0):e===0?(k(f.fetchPartialIDList,c,j,0,a),k(f.fetchParentIDList,h,h,0,a),f.prioritizeReqPrefetch=1):b!==c&&k(f.fetchPartialIDList,c,j,0,a)}function k(a,b,c,e,d){d||(d=0);if(f.idsList[b]!=1&&b&&c&&(!f.prefetchFixWeblab||!(c===f.twisterState.parentASIN&&a.type==="full"))&&a)f.idsList[b]=1,a.data.push({id:b,asin:c,isPrefetch:e,isHover:d})}function h(a){a||(a=0);var b=[];f.fetchParentIDList.data.length>0&&b.push({type:"parent",idList:f.fetchParentIDList.data});
f.fetchPartialIDList.data.length>0&&b.push({type:"partial",idList:f.fetchPartialIDList.data});f.fetchFullIDList.data.length>0&&b.push({type:"full",idList:f.fetchFullIDList.data});f.fetchMasterIDList.data.length>0&&b.push({type:"master",idList:f.fetchMasterIDList.data});b.length>0&&(a||f.pageRefresh.measurement.stampCustomMetrics("ns",f.twisterState.currentASIN),f.pageRefresh.react(b,a));f.fetchParentIDList.data=[];f.fetchPartialIDList.data=[];f.fetchFullIDList.data=[];f.fetchMasterIDList.data=[];
f.idsList={};f.prefetchCount=0}function j(a,c){for(var d={},e="",j=0;j<c.length;j++)e=null,f.twisterState.isDimSelected(j)&&(e=c[j],e==="(Please Select)"&&(e=null)),e!==null&&(e=b.htmlUnescape(e)),d[f.viewHandle.dimensionsMap[j]]=e;DetailPage.StateController.setState(a+"_variations",d)}var f=this;f.twisterControllerHandle=d;f.pageRefresh=m;f.twisterJSInitData=i;f.twisterVariationsData=l;f.twisterAvailabilityCache=r;f.prefetchCount=0;f.preHoverClass="";f.fetchParentIDList={type:"parent",data:[]};f.fetchPartialIDList=
{type:"partial",data:[]};f.fetchFullIDList={type:"full",data:[]};f.fetchMasterIDList={type:"master",data:[]};f.idsList={};f.prefetchFixWeblab=0;f.prioritizeReqPrefetch=0;f.handleMouseOver=function(a){var d;if(a!==null&&(f.twisterState.updateStateOnMouseOver(a),!b.isSwatchSelected(a,f.twisterVariationsData)||f.twisterVariationsData.useMS))d=f.twisterVariationsData.getDimensionValuesDisplayData(f.twisterState.hoveredAsin),f.twisterVariationsData.useMS||j("hovered",d),this.viewHandle.updateView(a,f.twisterState,
"mouseOver"),c(1),h(1)};f.handleDropdownChange=function(a){f.handleClick(a)};f.handleClick=function(d,k,i){var e=i?"mouseOut":"click",p=0,m=k,y=f.twisterState.getCurrentASIN();f.twisterVariationsData.useMS&&d&&b.isSwatchSelected(d,f.twisterVariationsData)&&(p=1);i||(i=0);if(!(m===null&&d===null)&&f.twisterState.updateStateOnClick(d,k,e)){m=f.twisterState.getCurrentASIN();if(!i&&y!==m&&!f.twisterState.partialState&&a.callbacks["sims-widget_feature_div"])a.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());
!f.twisterState.partialState&&!i&&f.pageRefresh.measurement.start(m);d=f.twisterVariationsData.getDimensionValuesDisplayData(m);j("selected",d);j("hovered",d);!f.twisterState.partialState&&!i&&f.pageRefresh.measurement.stampCustomMetrics("bb",m);f.viewHandle.updateView({},f.twisterState,e);!f.twisterState.partialState&&!i&&f.pageRefresh.measurement.stampCustomMetrics("be",m);p!==1&&(c(i),h(i))}};f.handleMouseOut=function(a){var c=f.twisterState.getCurrentASIN();(f.twisterVariationsData.useMS||!b.isSwatchSelected(a,
f.twisterVariationsData))&&f.handleClick(null,c,1)};(function(){var a;if(f.twisterJSInitData){f.twisterState=f.twisterControllerHandle.initTwisterState;f.MAX_PREFETCH_COUNT=f.twisterJSInitData.prefetchCount;f.prioritizeReqPrefetch=f.twisterJSInitData.prioritizeReqPrefetch;f.prefetchFixWeblab=f.twisterJSInitData.prefetchFixWeblab;a=f.twisterState.getCurrentASIN();a=f.twisterVariationsData.getDimensionValuesDisplayData(a);if(!f.viewHandle)f.viewHandle=f.twisterControllerHandle.twisterView;j("selected",
a);j("hovered",a)}f.pageRefresh.init(f.twisterJSInitData.storeID,f.twisterJSInitData.productGroupID)})()}});s.when("A","jQuery","twister-state","twister-utils","twister-string-constants","page-refresh:controller").register("twister-model-new",function(o,l,b,a,d,m){return function(b,l,r){function c(b,c,g,i){if(c&&!h.twisterVariationsData.useMS&&a.isSwatchSelected(c,h.twisterVariationsData))return!1;if(h.twisterState.updateStateOnClick(c,g,i,b)){c=h.twisterVariationsData.getDimensionValuesDisplayData(g);
if(!(i!=d.EVENT_TYPE_CLICK&&i!=d.EVENT_TYPE_DROPDOWN_CHANGE)){for(var g=h.twisterState.getCurrentDimCombID().split("_"),l={},e=0,p=h.twisterState.dimensionSelectionData.length;e<p;e++)l[h.twisterState.twisterJSInitData.dimensions[e]]=h.twisterState.dimensionSelectionData[e].isRequired=="1"&&h.twisterState.dimensionSelectionData[e].isSelected=="0"&&g[e]==="X"?"-1":g[e];DetailPage.StateController.setState("selected_variation_values",l)}k("selected",c);k("hovered",c);h.viewHandle.updateView({},h.twisterState,
i);m.updatePage(b,i);return!0}}function k(a,b){for(var c={},d="",k=0;k<b.length;k++)d=null,h.twisterState.isDimSelected(k)&&(d=b[k],d==="(Please Select)"&&(d=null)),c[h.viewHandle.dimensionsMap[k]]=d;DetailPage.StateController.setState(a+"_variations",c)}var h=this;h.twisterControllerHandle=b;h.twisterJSInitData=l;h.twisterVariationsData=r;h.pageRefresh=m.page;h.prefetch=function(a,b){var c=h.twisterState.getRequestContext(a,!0);m.prefetchPage(c,b)};h.handleMouseOver=function(b){if(!b||h.twisterVariationsData.useMS||
!a.isSwatchSelected(b,h.twisterVariationsData)){var c=h.twisterState.getHoverContext(b);h.twisterState.updateStateOnMouseOver(b,c);var g=h.twisterVariationsData.getDimensionValuesDisplayData(c.newAsin);(!h.twisterVariationsData.useMS||b&&b.dimDisplayType===d.TWISTER_DIMENSION_VIEW_VODD)&&k("hovered",g);this.viewHandle.updateView(b,h.twisterState,d.EVENT_TYPE_MOUSEOVER);m.updatePage(c,d.EVENT_TYPE_MOUSEOVER)}};h.handleClick=function(a){var b=h.twisterState.getRequestContext(a);c(b,a,b.childAsin,d.EVENT_TYPE_CLICK)&&
h.twisterVariationsData.dimensionsMap.length>1&&h.viewHandle.updateViewAfterTwisterUpdate(a,h.twisterState,d.EVENT_TYPE_CLICK)};h.handleMouseOut=function(a){a=h.twisterState.getCurrentContext(a);c(a,null,a.currentAsin,d.EVENT_TYPE_MOUSEOUT)};h.handleDropdownChange=function(a){var b=h.twisterState.getRequestContext(a);c(b,a,b.childAsin,d.EVENT_TYPE_DROPDOWN_CHANGE);b&&h.twisterVariationsData.dimensionsMap.length>1&&h.viewHandle.updateViewAfterTwisterUpdate(b.childAsin,h.twisterState,void 0)};(function(){if(h.twisterJSInitData){if(!h.viewHandle)h.viewHandle=
h.twisterControllerHandle.twisterView;h.twisterState=h.twisterControllerHandle.initTwisterState;var a=h.twisterState.getCurrentASIN(),a=h.twisterVariationsData.getDimensionValuesDisplayData(a);k("selected",a);k("hovered",a);m.init(l);o.on("dp:twister:prefetch",function(a,b){h.prefetch(a,b)})}})()}});s.when("A","twister-utils","twister-string-constants").register("twister-native-evdd",function(o,l,b){return function(a,d){var m=this,i=o.$,q;m.dimType="evdd";m.isMasterDim=!1;m.updateView=function(a){var a=
l.getDimStyleData(a.dimCombID,m.dimValuesDisplayData.length,m.dimOrder,m.twisterControllerHandle.twisterAvailabilityCache,m.displayConfigStylesData),b,d="";i(q).empty();for(var h=0,j=a.length;h<j;h++)if(rowData=a[h],b=rowData.style,b!=="invalid"||m.isMasterDim)b=b==="selected"?"selected":"",rowId="#native-"+m.dimName+"_"+h,b='<option id="'+rowId+'" value="'+h+'," '+b+">"+m.dimValuesDisplayData[h]+"</option>",d+=b;i(q).html(d)};m.dimOrder=d[b.STRING_DIM_ORDER];m.dimName=d[b.STRING_DIM_NAME];m.dimValuesDisplayData=
d[b.STRING_DIMENSION_VALUES_DATA];m.isMasterDim=!1;if(m.dimOrder==="0")m.isMasterDim=!0;m.dimNameDisplayString=d[b.STRING_DIMENSION_DISPLAY_STRING];m.displayConfigStylesData=d[b.STRING_DISPLAY_CONFIG_STYLES_DATA];m.twisterControllerHandle=d[b.STRING_TWISTER_CONTROLLER_HANDLE];q="#evdd-select-"+m.dimName;i(q).change(function(){var a=i(q).val(),a=parseInt(a.split(",")[0]);twisterController.handleClick({dimIndex:m.dimOrder,dimValueIndex:a})})}});s.when("A","twister-utils","detail-page-state-controller",
"twister-string-constants").register("twister-state",function(o,l,b,a){return function(d,m,i){function q(b){if(b.mType===a.MTYPE_PARENT&&b.relatedContext)b=b.relatedContext;return b}function r(b,e,d){var g=D.extend(!0,{},b);g.mType=a.MTYPE_MASTER;g.id="m"+d[0];g.relatedContext=b;g.doNotAbort=!0;g.url=c(g,e,[]);g.uniqueID=k(g,[]);return g}function c(a,b,c){var d=g.twisterJSInitData.twisterUpdateURLInfo,f=d.immutableURLPrefix,j=d.immutableParams,d=d.mutableParams,h=g.twisterJSInitData.contextMetaData[a.mType].mTypeSpecificURLParams,
n={};keyItr=0;n=D.extend(!0,{},d,h);if(c!=null)for(var h=0,k=c.length;h<k;h++){var i=c[h];if(!j.hasOwnProperty(i.key)){var m=i.key,l=i.value;n[m]=l;i.isPersistent&&(d[m]=l)}}for(var q in n)n[q]!=null&&(f+="&"+q+"="+n[q]);f+="&asinList="+a.newAsin+"&isFlushing=2&dpEnvironment="+Twister.dpEnvironment+"&id="+a.id+"&mType="+a.mType;b&&(f+="&prefetchRequest=1");return f}function k(a,b){var c="",d=a.mType,f=[],j=D.extend(!0,{},g.twisterJSInitData.twisterUpdateURLInfo.mutableParams);if(b!=null)for(var h=
0,n=b.length;h<n;h++){var k=b[h];j[k.key]=k.value}for(var i in j)j.hasOwnProperty(i)&&f.push(i);f.sort();h=0;for(n=f.length;h<n;h++)k=f[h],k!=null&&j!=null&&(c+=k+"="+j[k]+"&");c+="mType="+d+"&id="+a.id;return c}function h(b){var e=b[a.STRING_DIM_INDEX],c=b[a.STRING_DIM_VALUE_INDEX],b=g.getCurrentDimCombID().split("_");b[e]=c===-1?"X":c;b=b.join("_");return g.twisterAvailabilityCache.gAsinToRender(b,e)}function j(b,e){var c=g.getCurrentDimCombID().split("_"),d=c.length,f=g.twisterVariationsData.asinToDimIndexMapData[b],
j=-1,h;if(f)f=f.slice(0);else{f=[];for(h=0;h<d;h++)f[h]="X"}e!==null&&e!==void 0&&(j=e[a.STRING_DIM_INDEX]);for(var n=0;n<d;n++){if((h=g.dimensionSelectionData[n][a.STRING_IS_REQUIRED])&&n!==parseInt(j)&&f[n]!=c[n])f[n]="X",g.sizeSwatch&&g.partialState!=0&&(g.dimensionSelectionData[n][a.STRING_IS_SELECTED]=0);parseInt(j)!==-1&&parseInt(e[a.STRING_DIM_VALUE_INDEX])===-1&&(f[j]="X")}return f.join("_")}function f(b,e){for(var c=b.split("_"),d=0;d<g.dimensionSelectionData.length;d++)g.dimensionSelectionData[d][a.STRING_IS_REQUIRED]===
1&&e!==0&&(c[d]="X");return c.join("_")}var g=this,D=o.$;g.twisterJSInitData=d;g.twisterVariationsData=m;g.twisterAvailabilityCache=i;g.parentASIN="";g.currentASIN="";g.dimensionSelectionData={};g.unselectedDimCount=-1;g.master="";g.currentDimCombID="";g.preHoverClass="";g.hoveredReactId="";g.hoveredAsin="";g.hoveredDimCombID="";g.partialState="";g.previousPartialState="";g.previousReactId="";g.previousAsin="";g.sizeSwatch=!1;g.setMaster=function(a){g.master=a};g.getMaster=function(){return g.master};
g.getCurrentASIN=function(){return g.currentASIN};g.setCurrentASIN=function(a){if(a)g.currentASIN=a};g.getCurrentDimCombID=function(){return g.currentDimCombID};g.setCurrentDimCombID=function(a){if(a)g.currentDimCombID=a};g.isDimSelected=function(b){return g.dimensionSelectionData[b][a.STRING_IS_SELECTED]===1};g.setPreHoverData=function(b){if(!g.useMS)g.preHoverClass=l.getAttachedClass(b,g.twisterVariationsData.dimensionsMap[b[a.STRING_DIM_INDEX]])};g.updateStateOnMouseOver=function(b,e){var c,d;
b&&b[a.STRING_DIM_INDEX]==="0"&&g.setMaster(b[a.STRING_DIM_VALUE_INDEX]);c=e&&e.childAsin||h(b);d=g.unselectedDimCount;if(c===""){if(d<=0)return;c=g.getCurrentASIN()}g.hoveredAsin=c;c=e&&e.newDimCombID||j(g.hoveredAsin,b);g.hoveredDimCombID=c;d=c.search(/X/)>=0?1:0;c=e&&e.reactID||f(c,d);g.hoveredReactId=c;g.setPreHoverData(b)};g.updateStateOnClick=function(b,e,c,d){var k=-1,i=-1;g.previousAsin=g.getCurrentASIN();e=e||d&&d.childAsin||h(b);b&&b[a.STRING_DIM_INDEX]&&b[a.STRING_DIM_INDEX]==="0"&&g.setMaster(b[a.STRING_DIM_VALUE_INDEX]);
k=g.unselectedDimCount;g.previousPartialState=k;if(e===""){if(k<=0)return!1;e=g.getCurrentASIN()}k=d&&d.newDimCombID||j(e,b);if(a.EVENT_TYPE_CLICK===c||a.EVENT_TYPE_DROPDOWN_CHANGE===c){var m=b[a.STRING_DIM_INDEX],c=typeof g.preHoverClass!=="undefined"&&(g.preHoverClass.indexOf(a.CLASS_FOR_SWATCH_UNAVAILABLE)!==-1||g.preHoverClass.indexOf(a.CLASS_FOR_DROPDOWN_UNAVAILABLE)!==-1),n=k.split("_"),i=g.currentDimCombID.split("_");n[m]="*";i[m]="*";m=n.join("_");i=i.join("_");m!=i&&(c=!0);if(c||b[a.STRING_DIM_VALUE_INDEX]===
-1)for(var i=k.split("_"),n=0,l=g.dimensionSelectionData.length;n<l;n++)m=g.dimensionSelectionData[n],i[n]==="X"&&m[a.STRING_IS_SELECTED]===1&&(m[a.STRING_IS_SELECTED]=0,g.unselectedDimCount++);DetailPage.StateController.setState("isUnavailableInOldDimCombId",c?"true":"false");c=b[a.STRING_DIM_INDEX];if(b!==null&&b!==void 0&&(c=g.dimensionSelectionData[c],c[a.STRING_IS_SELECTED]===0&&parseInt(b[a.STRING_DIM_VALUE_INDEX])!==-1&&(c[a.STRING_IS_SELECTED]=1,g.unselectedDimCount--,g.unselectedDimCount<
0)))g.unselectedDimCount=0;i=g.unselectedDimCount;g.previousReactId=g.reactId}else i=k.search(/X/)>=0?1:0,g.previousReactId=g.hoveredReactId;b=d&&d.reactID||f(k,i);g.partialState=i;g.setCurrentASIN(e);g.setCurrentDimCombID(k);g.reactId=b;DetailPage.StateController.setState("current_asin",g.getCurrentASIN());DetailPage.StateController.setState("currentDimCombID",g.getCurrentDimCombID());DetailPage.StateController.setState("reactId",g.reactId);DetailPage.StateController.setState("dimensionSelectionData",
g.dimensionSelectionData);return!0};g.getCurrentContext=function(){var a=g.getRequestContext();return q(a)};g.getHoverContext=function(a){a=g.getRequestContext(a);return q(a)};g.getRequestContext=function(b,e){var d=g.getCurrentASIN(),i=g.parentASIN,m;m=b&&h(b)||d;var l=g.getCurrentDimCombID(),q=j(m,b),n=l.search(/X/)>=0?1:0,o=q.search(/X/)>=0?a.MTYPE_PARTIAL:a.MTYPE_FULL;if(!n&&o===a.MTYPE_PARTIAL)o=a.MTYPE_PARENT;var n=o!==a.MTYPE_FULL?1:0,A=f(q,n),d={divMetaData:b,currentAsin:d,newAsin:m,childAsin:m,
currentDimCombID:l,newDimCombID:q,reactID:A,partialState:n,mType:o,id:A.search(/X/)>=0?A:m};if(g.useMS&&m){if(i=g.twisterVariationsData.asinToDimIndexMapData[m])d.relatedContext=r(d,e,i),d.doNotAbort=!0}else if(o===a.MTYPE_PARENT)m=D.extend(!0,{},d),m.mType=a.MTYPE_PARTIAL,m.relatedContext=d,m.url=c(m,e,[]),m.doNotAbort=!0,m.uniqueID=k(m,[]),d.relatedContext=m,d.id=i,d.newAsin=i,d.doNotAbort=!0;d.url=c(d,e,[]);d.uniqueID=k(d,[]);return d};g.getRequestContextForExternalTwisterUpdates=function(b){var e=
g.getCurrentASIN(),d=g.getCurrentDimCombID();d.search(/X/);var j=d.search(/X/)>=0?a.MTYPE_PARTIAL:a.MTYPE_FULL,h=j!==a.MTYPE_FULL?1:0,i=f(d,h),d={divMetaData:{},currentAsin:e,newAsin:e,childAsin:e,currentDimCombID:d,newDimCombID:d,reactID:i,partialState:h,mType:j,id:i.search(/X/)>=0?i:e};if(g.useMS&&e&&(e=g.twisterVariationsData.asinToDimIndexMapData[e]))d.relatedContext=r(d,0,e),d.doNotAbort=!0;d.url=c(d,0,b);d.uniqueID=k(d,b);return d};(function(){var c=g.twisterJSInitData,e=c.keysToPopulateDetailPageStateController,
d;if(c){DetailPage.StateController=new b;for(var f=0,j=e.length;f<j;f++)d=e[f],DetailPage.StateController.setState(d,c[d]);DetailPage.StateController.setState("variation_display_labels",c[a.INIT_DATA_VARIATIONS_DISPLAY_LABELS]);DetailPage.StateController.setState("variation_label_order",c[a.INIT_DATA_DIMENSIONS_MAP]);g.currentASIN=c.current_asin;g.parentASIN=c.parent_asin;g.dimensionSelectionData=c.dimensionSelectionData;g.unselectedDimCount=c.unselectedDimCount;g.currentDimCombID=c.currentDimCombID;
g.reactId=c.reactId;g.storeID=c.storeId;g.productGroupID=c.productGroupId;g.useMS=c[a.STRING_USE_MS];g.useMS&&g.currentASIN&&g.twisterVariationsData.asinToDimIndexMapData[g.currentASIN]&&g.setMaster(g.twisterVariationsData.asinToDimIndexMapData[g.currentASIN][0]);if(D("#sizeSwatch").length)g.sizeSwatch=!0}})()}});s.when("A","twister-string-constants").register("twister-variations-data",function(o,l){return function(b){var a=this;a.twisterJSInitData=b;a.dimensionValuesDisplay={};a.getDimensionValuesDisplayData=
function(b){var m=a.dimensionValuesDisplay[b];!m&&b==a.deletedLandingAsinInfo.asin&&(m=a.deletedLandingAsinInfo.dimValues);return m};(function(){var b=a.twisterJSInitData;a.dimensionsMap=b[l.INIT_DATA_DIMENSIONS_MAP];a.dimensionValuesDisplay=b[l.INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA];a.deletedLandingAsinInfo=b[l.INIT_DATA_DELETED_LANDING_ASIN_INFO];a.dimToAsinMapData=b[l.INIT_DATA_DIM_TO_ASIN_MAP];a.asinToDimIndexMapData=b[l.INIT_DATA_ASIN_TO_DIM_INDEX_MAP];a.dimensionsDisplayType=b[l.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP];
a.dimensionValuesData=b[l.STRING_DIMENSION_VALUES_DATA];a.displayConfigStylesData=b[l.STRING_DISPLAY_CONFIG_STYLES_DATA];a.useMS=b[l.STRING_USE_MS];a.hoverMS=b[l.STRING_HOVER_MS]})()}});s.when("A","twister-dimension-view-factory","twister-string-constants").register("twister-view",function(o,l,b){return function(a,d,m,i,q){function r(a,c,d,g,i){var k={},e={};k[b.STRING_EVENT_TYPE]=a;k[b.STRING_DIM_COMB_ID]=c;e[b.STRING_EVENT_DIV_METADATA]=d;e[b.STRING_EVENT_DIM_INFO]=g;e[b.STRING_DIMENSION_SELECTION_DATA]=
i;k[b.STRING_EVENT_DATA]=e;return k}var c=this,k=o.$;c.twisterControllerHandle=a;c.twisterJSInitData=m;c.twisterVariationsData=i;c.twisterAvailabilityCache=q;c.dimensionsMap={};c.dimensionDisplayMap={};c.dimensionDisplayTypeMap={};c.dimensionViewHandlersMap={};c.updateView=function(a,d,f){var g={},i,k=d.dimensionSelectionData;f===b.EVENT_TYPE_MOUSEOVER?(i=d.hoveredAsin,d=d.hoveredDimCombID):(i=d.getCurrentASIN(),d=d.getCurrentDimCombID());g[b.STRING_DIMENSION_VALUES_DATA]=c.twisterVariationsData.getDimensionValuesDisplayData(i);
g[b.STRING_DIMENSION_DISPLAY_MAP]=c.dimensionDisplayMap;g[b.STRING_DIMENSIONS_MAP]=c.dimensionsMap;a=r(f,d,a,g,k);f=0;for(g=c.dimensionsMap.length;f<g;f++)c.dimensionViewHandlersMap[f].updateView(a)};c.updateViewAfterTwisterUpdate=function(a,d,f){var g={},i=d.dimensionSelectionData;d.getCurrentASIN();d=d.getCurrentDimCombID();g[b.STRING_DIMENSION_DISPLAY_MAP]=c.dimensionDisplayMap;g[b.STRING_DIMENSIONS_MAP]=c.dimensionsMap;a=r(f,d,a,g,i);if(f===b.EVENT_TYPE_DROPDOWN_CHANGE||f===b.EVENT_TYPE_CLICK){f=
0;for(g=c.dimensionsMap.length;f<g;f++)c.dimensionViewHandlersMap[f].updateViewAfterTwisterUpdate&&c.dimensionViewHandlersMap[f].updateViewAfterTwisterUpdate(a)}};(function(a){var d=c.twisterJSInitData;c.dimensionsMap=d[b.INIT_DATA_DIMENSIONS_MAP];c.dimensionDisplayMap=d[b.INIT_DATA_DIMENSIONS_DISPLAY];c.dimensionDisplayTypeMap=d[b.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP];for(var f=0,g=c.dimensionsMap.length;f<g;f++)d=l.getDimensionSubViewObject(c.twisterJSInitData,c.twisterVariationsData,f.toString(10),
c.twisterControllerHandle,a),c.dimensionViewHandlersMap[f]=d;k(b.CLASS_FOR_NON_JS_EVDD).hide();k(b.CLASS_FOR_NEW_TWISTER_EVDD).show()})(d)}});s.when("A","a-dropdown","twister-thumbnailModule","twister-utils","twister-string-constants").register("twister-dimension-views-dropdown",function(o,l,b,a,d){return function(m,i){function q(){var a=d.DROPDOWN_DIV_NAME+c.dimName,b={},f;b[d.STRING_DIM_INDEX]=c.dimOrder;f=function(a){c.twisterControllerHandle&&c.twisterControllerHandle.handleDropdownOnChange(a,
b)};s.when("A").execute(function(b){b.on(d.AUI_DROPDOWN_EVENT_PREFIX+a,f)})}function r(b){var j,f,g,i;f=d.ID_SELECTOR+c.dimName+d.CHAR_UNDERSCORE+d.INDEX_FOR_SELECT_OPTION;var m=d.NATIVE_DROPDOWN_DIV_PREFIX+d.DROPDOWN_DIV_NAME+c.dimName,e=k(m).val().split(",")[0],l=b[d.STRING_EVENT_TYPE],q=b[d.STRING_EVENT_DATA][d.STRING_DIMENSION_SELECTION_DATA],b=a.getDimStyleData(b.dimCombID,c.dimValuesDisplayData.length,c.dimOrder,c.twisterControllerHandle.twisterAvailabilityCache,c.displayConfigStylesData);q[c.dimOrder][d.STRING_IS_SELECTED]===
0&&e!==d.INDEX_FOR_SELECT_OPTION&&typeof c.AuiDropdownHandle!=="undefined"&&c.AuiDropdownHandle.getSelect(m).val("-1");(l===d.EVENT_TYPE_CLICK||l===d.EVENT_TYPE_DROPDOWN_CHANGE)&&q[c.dimOrder][d.STRING_IS_REQUIRED]===0&&q[c.dimOrder][d.STRING_IS_SELECTED]===1&&k(f).remove();e=0;for(q=b.length;e<q;e++)if(j=b[e],f=d.NATIVE_DROPDOWN_DIV_PREFIX+c.dimName+d.CHAR_UNDERSCORE+e,j=j[d.STRING_STYLE],g=k(f).get(0).className,j===d.CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION&&(i=k(f).attr("value"),k(m).val()!==i&&
c.AuiDropdownHandle.getSelect(m).val(i)),g!==j)try{g={},g[d.STRING_CSS_CLASS]=j,g[d.STRING_NATIVE_CSS_CLASS]=j,c.AuiDropdownHandle.updateOption(f,g)}catch(y){}c.isTablet&&(l===d.EVENT_TYPE_CLICK||l===d.EVENT_TYPE_DROPDOWN_CHANGE)&&c.thumbnailHandle&&c.thumbnailHandle.update(c.dimName)}var c=this,k=o.$;c.dimType="dropdown";c.AuiDropdownHandle=l;c.thumbnailHandle=b;c.updateView=function(a){a[d.STRING_EVENT_TYPE]===d.EVENT_TYPE_MOUSEOUT?r(a):(a[d.STRING_EVENT_TYPE]===d.EVENT_TYPE_CLICK||a[d.STRING_EVENT_TYPE]===
d.EVENT_TYPE_DROPDOWN_CHANGE)&&r(a)};(function(){var b;c.dimOrder=i[d.STRING_DIM_ORDER];c.dimName=i[d.STRING_DIM_NAME];c.dimensionsMap=i[d.STRING_DIMENSIONS_MAP];c.dimNameDisplayString=i[d.STRING_DIMENSION_DISPLAY_STRING];c.dimValuesDisplayData=i[d.STRING_DIMENSION_VALUES_DATA];c.twisterControllerHandle=i[d.STRING_TWISTER_CONTROLLER_HANDLE];c.displayConfigStylesData=i[d.STRING_DISPLAY_CONFIG_STYLES_DATA];c.initialTwisterState=i[d.STRING_TWISTER_INITIAL_STATE_KEY];c.isTablet=m.isTablet;b=c.initialTwisterState.getCurrentDimCombID();
c.dimStyleData=a.getDimStyleData(b,c.dimValuesDisplayData.length,c.dimOrder,c.twisterControllerHandle.twisterAvailabilityCache,c.displayConfigStylesData);q();if(c.isTablet)for(var j=0,f=c.dimensionsMap.length;j<f;j++)b=c.dimensionsMap[j],c.thumbnailHandle.attach(b),c.thumbnailHandle.preloadAllThumbnails(b)})()}});s.when("A").register("twister-dimension-views-singleton",function(){return function(){this.updateView=function(){}}});s.when("A","twister-dimension-views-unavailablePopover","twister-utils",
"twister-string-constants","twister-dimension-views-ingress","twister-logger","twister-modal-resize-helper").register("twister-dimension-views-swatch",function(o,l,b,a,d,m,i){return function(q,r){function c(b,c){var d=DetailPage.StateController.getState().selected_variations,g=DetailPage.StateController.getState()[a.STRING_DIMENSION_SELECTION_DATA],f;if(e.twisterIngressHandle)f=e.twisterIngressHandle.modalHandle.twisterModalDiv;if(c)p("#variation_"+e.dimName+" .selection").html(b).addClass("hover"),
f&&f.length>0&&p("#"+a.TWISTER_MODAL_ID_PREFIX+e.dimName+" .selection").html(b).addClass("hover");else{var j=p("#variation_"+e.dimName+" .selection"),i=p("#"+a.TWISTER_MODAL_ID_PREFIX+e.dimName+" .selection");if(e.sizeSwatch){var m="";h(g,e.dimOrder)&&b===""||(d[e.dimName]==null?k(g,e.dimOrder)&&(m=b):m=d[e.dimName]);j.html(m).removeClass("hover");f&&f.length>0&&i.html(d[e.dimName]).removeClass("hover")}else p("#variation_"+e.dimName+" .selection").html(b).removeClass("hover"),f&&f.length>0&&p("#"+
a.TWISTER_MODAL_ID_PREFIX+e.dimName+" .selection").html(b).removeClass("hover")}}function k(b,e){var c=!1;1==b[e][a.STRING_IS_SELECTED]&&(c=!0);return c}function h(b,e){var c=!1;1==b[e][a.STRING_IS_REQUIRED]&&(c=!0);return c}function j(b,c){if(e.twisterIngressHandle){e.twisterIngressHandle.modalHandle.isModalOpen&&e.logger.logImpression(e.logger.eventTypes.IMMERSIVE_SWATCH_CLICK,null);var d=e.twisterIngressHandle.modalHandle.twisterModalDiv,g=c===void 0?p(b.$target).parents().closest("li"):c,f=g.attr("id"),
j=p("#"+f);d.has(g)&&f.indexOf(a.MODAL_SWATCH_PREFIX)===0&&(d=e.finalLimitForSwatches-1-1,g=p("#variation_"+e.dimName+" > ul > li"),j.index()>d&&(p(g.get(e.finalLimitForSwatches-1)).remove(),f=f.replace(a.MODAL_SWATCH_PREFIX,""),p(j.clone().attr("id",f)).insertAfter(g.get(d))),e.twisterIngressHandle&&e.twisterIngressHandle.modalHandle.isModalOpen&&e.twisterIngressHandle.modalHandle.closeTwisterModal());e.$swatches=p(e.swatchWrapper);e.twisterIngressHandle.modalHandle.$swatches=p(e.twisterIngressHandle.modalHandle.swatchWrapper)}}
function f(b){var c=Twister.isImmersiveExperience?p("."+a.TWISTER_SWATCH_CLASS_PREFIX+e.dimName+a.CHAR_UNDERSCORE+b):p(a.ID_SELECTOR+e.dimName+a.CHAR_UNDERSCORE+b),b=[],d;if(c.length>0)for(var b=c.get(0).className.split(" "),c=0,g=b.length;c<g;c++){var f=b[c];if(f.indexOf("swatch")===0){d=f;break}}return d}function g(b,c,d){b=Twister.isImmersiveExperience?p("."+a.TWISTER_SWATCH_CLASS_PREFIX+e.dimName+a.CHAR_UNDERSCORE+b):p(a.ID_SELECTOR+e.dimName+a.CHAR_UNDERSCORE+b);c!==d&&p(b).removeClass(c).addClass(d)}
function s(b,c){var d=Twister.isImmersiveExperience?p("."+a.TWISTER_SWATCH_CLASS_PREFIX+e.dimName+a.CHAR_UNDERSCORE+b+" ."+a.PRICE_SLOT_CLASS_NAME):p(a.ID_SELECTOR+e.dimName+a.CHAR_UNDERSCORE+b+"_price"),g=a.CLASS_FOR_PRICE_SECONDARY;if(c===a.CLASS_FOR_SWATCH_SELECT||c===a.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||c===a.CLASS_FOR_SWATCH_HOVER)g=a.CLASS_FOR_PRICE_SELECTED;d.length&&d.removeClass(a.CLASS_FOR_PRICE_SECONDARY+" "+a.CLASS_FOR_PRICE_SELECTED).addClass(g)}function w(c){var d={};d.asinList=c;p("#"+
a.TWISTER_FEATURE_DIV_ID).css("opacity",e.twisterDimmedOpacity);d.dimTriggeringDimSum=e.dimName;d.dimSubType=e.dimSubType;d.dimCombId=DetailPage.StateController.getState().currentDimCombID;d.executeChunk=function(){var a=DetailPage.StateController.getState().currentDimCombID,c=a.split("_"),g=d.dimCombId.split("_");if(d.dimCombId===a)return!0;else if(!b.isPartialState(e.dimensionsMap.length)){for(var a=e.dimensionsMap.length,f=!0,j=0;j<a;j++)if(j!==parseInt(e.dimOrder)&&g[j]!==c[j]){f=!1;break}return f}return!1};
d.chunk=function(a){for(var b=p(".twister_"+e.dimName+"_"+e.twisterJSInitData.asin_variation_values[a.ASIN][e.dimName]+" .twisterSlotDiv"),c="",d=0;a.Value.content.twisterSlotDiv[d];)e.dimSubType==="IMAGE"&&(c+="<div>"),c+=a.Value.content.twisterSlotDiv[d],e.dimSubType==="IMAGE"&&(c+="</div>"),d++;b.html(c)};d.success=function(){e.resizeHelperHandle.fixSize(e.$swatches,e.swatchWrapper,e.swatchDynaWrapper,e.ingressWrapper);p("#"+a.TWISTER_FEATURE_DIV_ID).css("opacity",1)};d.error=function(){e.resizeHelperHandle.fixSize(e.$swatches,
e.swatchWrapper,e.swatchDynaWrapper,e.ingressWrapper);p("#"+a.TWISTER_FEATURE_DIV_ID).css("opacity",1)};d.abort=function(){e.resizeHelperHandle.fixSize(e.$swatches,e.swatchWrapper,e.swatchDynaWrapper,e.ingressWrapper);p("#"+a.TWISTER_FEATURE_DIV_ID).css("opacity",1)};Twister.dimensionalSummaryModule.fetchDimSumData(d)}var e=this,p=o.$;e.dimType="swatch";e.dimSubType="";e.twisterJSInitData=q;e.newPrefetchWeblab=!1;if(Twister.multiDimensionWeblabEnabled)var x="ImmersiveMultiDimensionView";else Twister.isImmersiveExperience&&
(x="ImmersiveSwatchSingleDimensionView");e.logger=x!==void 0?new m(p,this,x):new m(p,this);e.logger.init();e.sizeSwatch=!1;e.updateView=function(d){if(d[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_MOUSEOVER){var j,i,n,m,q=d[a.STRING_EVENT_DATA],r=q[a.STRING_EVENT_DIM_INFO][a.STRING_DIMENSION_VALUES_DATA][e.dimOrder],q=q[a.STRING_EVENT_DIV_METADATA];if(e.dimOrder==q[a.STRING_DIM_INDEX]){var o=f(q[a.STRING_DIM_VALUE_INDEX]),B=b.getDimStyleData(d.dimCombID,e.dimValuesDisplayData.length,e.dimOrder,e.twisterControllerHandle.twisterAvailabilityCache,
e.displayConfigStylesData);j=e.twisterIngressHandle&&e.twisterIngressHandle.modalHandle.isModalOpen?a.MODAL_SWATCH_PREFIX+e.dimName+"_"+q.dimValueIndex:e.dimName+"_"+q.dimValueIndex;i=e.twisterJSInitData;n={};n.hidePopover=i.hidePopover;n.unavailablePopOverStringValue=i.unavailablePopOverStringValue;n.showDimSecondUnavailablePopover=i.showDimSecondUnavailablePopover;parseInt(q[a.STRING_DIM_INDEX])===parseInt(e.dimOrder)&&o===a.CLASS_FOR_SWATCH_UNAVAILABLE&&!e.twisterJSInitData[a.STRING_HIDE_POPOVER]&&
l.triggerPopover(d,n,j);p(a.ID_SELECTOR+a.TWISTER_POPOVER).css("z-index","2000");c(r,!0);d=0;for(r=B.length;d<r;d++)if(j=B[d],j=j[a.STRING_STYLE],i=f(d),n=i===a.CLASS_FOR_SWATCH_SELECT?!0:!1,m=parseInt(q[a.STRING_DIM_INDEX])===parseInt(e.dimOrder)&&parseInt(q[a.STRING_DIM_VALUE_INDEX])===parseInt(d)?!0:!1,!n&&(o!==a.CLASS_FOR_SWATCH_UNAVAILABLE||m))j===a.CLASS_FOR_SWATCH_SELECT&&(j=i===a.CLASS_FOR_SWATCH_UNAVAILABLE?a.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:a.CLASS_FOR_SWATCH_HOVER,s(d,j)),g(d,i,j)}}else{eventData=
d[a.STRING_EVENT_DATA];eventDimInfo=eventData[a.STRING_EVENT_DIM_INFO];dimensionValueDisplay=eventDimInfo[a.STRING_DIMENSION_VALUES_DATA][e.dimOrder];divMetaData=eventData[a.STRING_EVENT_DIV_METADATA];dimensionSelectionData=eventData[a.STRING_DIMENSION_SELECTION_DATA];dimCombID=d.dimCombID;dimDataForThisInteraction=b.getDimStyleData(dimCombID,e.dimValuesDisplayData.length,e.dimOrder,e.twisterControllerHandle.twisterAvailabilityCache,e.displayConfigStylesData);e.sizeSwatch?(o=dimCombID.split("_")[0],
q=h(dimensionSelectionData,e.dimOrder),B=k(dimensionSelectionData,e.dimOrder),o=="X"&&q&&B||c(dimensionValueDisplay,!1)):c(dimensionValueDisplay,!1);r=0;for(j=dimDataForThisInteraction.length;r<j;r++){o=dimDataForThisInteraction[r];B=o[a.STRING_STYLE];if(dimensionSelectionData[e.dimOrder][a.STRING_IS_SELECTED]===0&&B===a.CLASS_FOR_SWATCH_SELECT)B=a.CLASS_FOR_SWATCH_AVAILABLE;d=f(r);e.sizeSwatch&&(q=h(dimensionSelectionData,e.dimOrder),i=!k(dimensionSelectionData,e.dimOrder),d==a.CLASS_FOR_SWATCH_SELECT&&
o[a.STRING_STYLE]==a.CLASS_FOR_SWATCH_SELECT&&q&&i&&(B=o[a.STRING_STYLE]));d&&(e.sizeSwatch&&(q=h(dimensionSelectionData,e.dimOrder),(d==a.CLASS_FOR_SWATCH_SELECT||d==a.CLASS_FOR_SWATCH_HOVER)&&q&&B==a.CLASS_FOR_SWATCH_UNAVAILABLE&&c("",!1)),d=f(r),g(r,d,B),s(r,B))}}};e.updateViewAfterTwisterUpdate=function(c){var d=c[a.STRING_EVENT_DATA][a.STRING_EVENT_DIV_METADATA],c=DetailPage.StateController.getState().currentDimCombID.split("_");if(Twister.multiDimensionWeblabEnabled){var g=p(a.ID_SELECTOR+a.MODAL_SWATCH_PREFIX+
e.dimName+"_"+c[e.dimOrder]);j(void 0,g);if(e.isSlotsEnabled)if(b.isPartialState(e.dimensionsMap.length)){c=p(" .twisterSwatchWrapper_"+e.dimOrder+" .twisterSlotDiv");if(c.css("display")!=="none")document.getElementById("twisterSwatchWrapperDynaStyle_"+e.dimOrder).innerHTML=".twisterSwatchWrapper_"+e.dimOrder+" {min-width:100%;min-height:100%;}",c.css("display","none"),e.resizeHelperHandle.fixSize(e.$swatches,e.swatchWrapper,e.swatchDynaWrapper,e.ingressWrapper);Twister.immersiveBannersPresent&&(c=
b.getImmersivePartialStateBannerContent(q,parseInt(e.dimOrder)),d=p("#twisterImmersiveGlanceBanner"),d.html(c),d.removeClass("twisterImmersiveBannerHide"),p("#twisterImmersiveModalBanner").html(c))}else if(d[a.STRING_DIM_INDEX]!=e.dimOrder||DetailPage.StateController.getState().isUnavailableInOldDimCombId==="true"){for(var g=p(a.ID_SELECTOR+"variation_"+e.dimName+" > ul > li"),d=[],f=e.twisterJSInitData.dimensionValuesData[e.dimOrder].length,i=e.isImmersiveViewEnabled?e.finalLimitForSwatches:f,h=
0;h<f;h++)p("."+a.TWISTER_SWATCH_CLASS_PREFIX+e.dimName+"_"+h+" ."+a.CLASSNAME_FOR_SWATCH+"_"+e.dimOrder).css("min-width","");p(a.ID_SELECTOR+a.TWISTER_INGRESS_ID_PREFIX+e.dimName+" ."+a.CLASSNAME_FOR_SWATCH+"_"+e.dimOrder).css("min-width","");p("."+a.CLASSNAME_FOR_INGRESS+"_"+e.dimOrder).css("min-width","");p(a.ID_SELECTOR+a.TWISTER_INGRESS_ID_PREFIX+e.dimName+" ."+a.CLASSNAME_FOR_SWATCH+"_"+e.dimOrder).css("min-height","");for(f=0;f<i;f++){var h=p(g.get(f)).find(".a-declarative"),k=h.attr("data-action"),
h=JSON.parse(h.attr("data-"+k)).dimValueIndex;c[e.dimOrder]=h;var m=c.join("_"),k=p("."+a.TWISTER_SWATCH_CLASS_PREFIX+e.dimName+"_"+h+" .twisterSlotDiv");k.css("display","");(m=e.twisterJSInitData[a.INIT_DATA_DIM_TO_ASIN_MAP][m])?(d.push(m),k.html("<div class='loadingSlot_0' style='width: 40px; margin : 5px 0px 5px 5px; height : 7px'></div><div class='loadingSlot_1'      style='width: 30px; margin : 5px 0px 0px 5px; height : 7px'></div>")):p("."+a.TWISTER_SWATCH_CLASS_PREFIX+e.dimName+"_"+h+" .twisterSlotDiv").html("<span class='a-color-tertiary'>- -</span>")}p(a.ID_SELECTOR+
a.TWISTER_MODAL_ID_PREFIX+e.dimName+" .swatches li").invalidateAppearedAlreadyCache();f=e.twisterJSInitData.dimensionValuesData[e.dimOrder].length;for(h=0;h<f;h++)c=p(a.ID_SELECTOR+a.TWISTER_MODAL_ID_PREFIX+e.dimName+" ."+a.TWISTER_SWATCH_CLASS_PREFIX+e.dimName+"_"+h+" .twisterSlotDiv"),c.css("display",""),c.html("<div class='loadingSlot_0' style='width: 40px; margin : 5px 0px 5px 5px; height : 7px'></div><div class='loadingSlot_1' style='width: 30px;  margin : 5px 0px 0px 5px; height : 7px'></div>");
d.length>0?w(d):e.resizeHelperHandle.fixSize(e.$swatches,e.swatchWrapper,e.swatchDynaWrapper,e.ingressWrapper);Twister.immersiveBannersPresent&&(p("#twisterImmersiveGlanceBanner").addClass("twisterImmersiveBannerHide"),c=b.getImmersiveFullStateBannerContent(q,parseInt(e.dimOrder)),p("#twisterImmersiveModalBanner").html(c))}}};e.isImmersiveViewEnabled=r.isImmersiveViewEnabled;e.isSlotsEnabled=r.isSlotsEnabled;e.newPrefetchWeblab=e.twisterJSInitData.newPrefetchWeblab;e.dimOrder=r[a.STRING_DIM_ORDER];
e.dimName=r[a.STRING_DIM_NAME];e.dimensionsMap=r[a.STRING_DIMENSIONS_MAP];e.dimNameDisplayString=r[a.STRING_DIMENSION_DISPLAY_STRING];e.dimValuesDisplayData=r[a.STRING_DIMENSION_VALUES_DATA];e.displayConfigStylesData=r[a.STRING_DISPLAY_CONFIG_STYLES_DATA];e.twisterControllerHandle=r[a.STRING_TWISTER_CONTROLLER_HANDLE];e.initialTwisterState=r[a.STRING_TWISTER_INITIAL_STATE_KEY];currDimCombID=e.initialTwisterState.getCurrentDimCombID();e.dimData=b.getDimStyleData(currDimCombID,e.dimValuesDisplayData.length,
e.dimOrder,e.twisterControllerHandle.twisterAvailabilityCache,e.displayConfigStylesData);e.maxSwatchLimitForImmersive=r[a.STRING_MAX_SWATCHES_IMMERSIVE_VIEW];e.dimSubType=r.dimensionDisplaySubType;e.finalLimitForSwatches=e.maxSwatchLimitForImmersive-1;(function(){o.declarative(Twister.isImmersiveExperience?a.AUI_EVENT_FOR_SWATCHTHUMB+"-"+e.dimOrder:a.AUI_EVENT_FOR_SWATCHTHUMB,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_MOUSEENTER,a.EVENT_TYPE_MOUSELEAVE,a.EVENT_TYPE_MOUSEDOWN,a.EVENT_TYPE_TOUCHSTART],function(b){if(b.type===
a.EVENT_TYPE_CLICK)e.twisterControllerHandle&&(e.twisterControllerHandle.handleClick(b.data),j(b));else if(b.type===a.EVENT_TYPE_MOUSEENTER)e.twisterControllerHandle&&e.twisterControllerHandle.handleMouseOver(b.data);else if(b.type===a.EVENT_TYPE_MOUSELEAVE)e.twisterControllerHandle&&e.twisterControllerHandle.handleMouseOut(b.data,b.data[a.STRING_DIM_INDEX],b.data[a.STRING_DIM_VALUE_INDEX]);else if(e.newPrefetchWeblab&&(b.type===a.EVENT_TYPE_MOUSEDOWN||b.type===a.EVENT_TYPE_TOUCHSTART))e.twisterControllerHandle&&
e.twisterControllerHandle.handleClickPrediction(b.data,e.newPrefetchWeblab==="T1"?a.YES:a.NO)})})();(function(){for(var b,c,d=0,j=e.dimData.length;d<j;d++)if(b=e.dimData[d],c=f(d))b=b[a.STRING_STYLE],g(d,c,b),s(d,b)})();(function(){if(p("#twister_ingress_"+e.dimName).length>0){var a={};a.dimName=e.dimName;a.dimOrder=e.dimOrder;a.dimData=e.dimData;a.dimensionsMap=e.dimensionsMap;a.dimNameDisplayString=e.dimNameDisplayString;a.dimValuesDisplayData=e.dimValuesDisplayData;a.maxSwatchLimitForImmersive=
e.maxSwatchLimitForImmersive;a.dimSubType=e.dimSubType;a.isSlotsEnabled=e.isSlotsEnabled;e.twisterIngressHandle=new d(a,e.twisterJSInitData)}})();e.resizeHelperHandle=new i;e.swatchWrapper=".twisterSwatchWrapper_"+e.dimOrder;e.swatchDynaWrapper="twisterSwatchWrapperDynaStyle_"+e.dimOrder;e.$swatches=p(e.swatchWrapper);e.twisterDimmedOpacity=0.2;if(p("#sizeSwatch").length)e.sizeSwatch=!0}});s.when("A","twister-utils","twister-string-constants","scroll-event-handler","a-popover").register("twister-vodd",
function(o,l,b,a,d){return function(m,i){function q(){A(t.initialTwisterState.getCurrentDimCombID());f();s.when("A","ready").execute(function(){window.setTimeout(function(){r()},1E3)})}function r(){var a=parseInt(t.dimensionOrder)*ta,b=a,c=function(a,b,c){a.addClass(Y);setTimeout(function(){a.animate({top:c||"0px"},{duration:ua,complete:function(){v(this).removeClass(Y)}})},b)};G.length&&G.parent("td").is(":visible")&&(c(G.parent("td"),a,va),b=a+wa);c(S.parent("td"),b,xa)}function c(c){u();H.bind(b.EVENT_TYPE_CLICK,
y);l.isTouchDevice()||H.bind(b.EVENT_TYPE_MOUSEENTER,z).bind(b.EVENT_TYPE_MOUSELEAVE,C);K=!1;var d=c.popover.$trigger,g={popover:c};c.popover.$container.hasClass(Z)||c.popover.$container.addClass(Z);d.trigger(ya,g);$||(L=E.closest(".a-popover-inner"),$=new a(za,L,e));c=E.find("tr."+T);L&&L.length&&L.scrollTop(c.get(0).offsetTop-Aa)}function k(a){if(F){var c=F.length/t.dimValuesDisplayData.length*100,c={divMetaData:x(null),count:Math.ceil(t.dimValuesDisplayData.length/M),percentage:Math.floor(c),dimDisplayType:b.TWISTER_DIMENSION_VIEW_VODD};
J.logImpression(a,c)}}function h(a){var b=a.popover.$trigger,a={popover:a};K||(k(I.SCROLL),F=null);K=!0;b.blur();b.trigger(Ba,a)}function j(a){a.popover.$trigger.trigger(Ca,{popover:a})}function f(){var a={closeButton:!1,position:"triggerBottom",name:N,activate:l.isTouchDevice()?"onmouseover":"onclick"},e=E.find("tr");e.length&&e.length>M&&v.extend(a,{height:Da});B=d.create(t.dimensionButton,a);o.on("a:popover:afterShow:"+N,c);o.on("a:popover:afterHide:"+N,h);o.on("a:popover:afterUpdatePosition:"+
N,j);t.dimensionButton.bind(l.isTouchDevice()?b.EVENT_TYPE_TOUCHEND:b.EVENT_TYPE_CLICK,function(){if(B.isActive())return B.hide(),!1;else J.logImpression(I.CLICK,{time:Date.now()}),l.isTouchDevice()&&t.dimensionButton.trigger("mouseenter")})}function g(a){var b=J.createFunctionTimer(I.DIM_SUM_LOAD);b.start();var c=function(){v.each(a,function(a,b){O.splice(v.inArray(b,O),1)});b.stop()},e=aa+a.join(Ea);o.ajax(e,{chunk:function(a){a&&v.isArray(a)&&(v.each(a,function(a,b){t.initialTwisterState.asinDimensionValuesInfo[b.asin]=
b}),w(a))},success:function(){b.stop()},error:c,abort:c,timeout:Fa})}function D(a){var b=t.initialTwisterState.getCurrentDimCombID(),c=parseInt(t.dimensionOrder),e=[],d=[];F||(F=[]);for(var f=0;f<a.length;f++){e.length===Ga&&(g(e),e=[]);var j=p(a[f].id);combination=l.reconstructCombinationWithDimValue(b,c,j);asin=ba[combination];F.indexOf(j)<0&&F.push(j);asin&&(v.inArray(asin,O)>-1||(e.push(asin),O.push(asin)),t.initialTwisterState.asinDimensionValuesInfo[asin]&&d.push(t.initialTwisterState.asinDimensionValuesInfo[asin]))}e.length>
0&&g(e);d.length>0&&w(d)}function w(a){a&&v.each(a,function(a,b){var c=Q[b.asin][parseInt(t.dimensionOrder)],c=E.find(U+c);v(c).find("."+V).hide();b&&(b.isAvailable?(b.hasFreshBadge?v(c).find("i."+ca).removeClass(R):b.hasPrimeBadge&&v(c).find("i."+da).removeClass(R),b.isPriceHidden?v(c).find("."+ea).show():b.price&&v(c).find("."+fa).html(b.price).show(),b.ppu&&v(c).find("."+ga).html(b.ppu).show(),b.isSnsEligible&&!b.hasFreshBadge&&v(c).find("."+ha).show()):b.availability?v(c).find("."+ia).html(b.availability).show():
v(c).find("."+ja).show(),v(c).find("."+ka).show())})}function e(a){a=l.getVisibleTableRows(a.currentTarget,E.find("tr"));D(a)}function p(a){if(!a)return-1;a=a.split(b.CHAR_UNDERSCORE);return a[a.length-1]}function x(a){return{dimIndex:t.dimensionOrder,dimValueIndex:a?p(a.id):null,dimDisplayType:b.TWISTER_DIMENSION_VIEW_VODD}}function y(a){k(I.CLICK_VARIATION);K||k(I.SCROLL);K=!0;F=null;var b=x(a.currentTarget),c=t.initialTwisterState.getCurrentDimCombID(),c=l.reconstructCombinationWithDimValue(c,
b.dimIndex,b.dimValueIndex);t.twisterControllerHandle&&(u(),t.twisterControllerHandle.handleClick(b));c=t.twisterControllerHandle.twisterAvailabilityCache.isDimCombinationAvailable(c);b={dimensionOrder:t.dimensionOrder,dimensionValueIndex:b.dimValueIndex,isSelectedDimValueAvailable:c};v(a.currentTarget).trigger(Ha,b)}function z(a){v(a.currentTarget).addClass(W);t.twisterControllerHandle&&(a=x(a.currentTarget),t.twisterControllerHandle.handleMouseOver(a))}function C(a){v(a.currentTarget).removeClass(W);
if(t.twisterControllerHandle){var b=x(a.currentTarget),a=p(a.currentTarget.id);t.twisterControllerHandle.handleMouseOut(b,t.dimensionOrder,a)}}function n(a){H.sort(function(c,e){var d=p(c.id),f=p(e.id);if(a[d][b.STRING_STYLE]!==a[f][b.STRING_STYLE])if(a[d][b.STRING_STYLE]===b.CLASS_FOR_VODD_UNAVAILABLE)return 1;else if(a[f][b.STRING_STYLE]===b.CLASS_FOR_VODD_UNAVAILABLE)return-1;return d-f});H.detach().appendTo(E)}function u(){H.unbind(b.EVENT_TYPE_CLICK,y);l.isTouchDevice()||H.unbind(b.EVENT_TYPE_MOUSEENTER,
z).unbind(b.EVENT_TYPE_MOUSELEAVE,C)}function A(a){a=l.getDimStyleData(a,t.dimValuesDisplayData.length,t.dimensionOrder,t.twisterControllerHandle.twisterAvailabilityCache,t.displayConfigStylesData);n(a);for(var c=null,e=0;e<a.length;e++){var d=a[e],f=E.find(U+e);if(d[b.STRING_STYLE]===b.CLASS_FOR_VODD_SELECT){if(c=f,f.addClass(T),S.text(t.dimValuesDisplayData[e]),G.length){var g=f.find("."+Ia);g.length>0?G.prop("src",g.prop("src")).show():G.hide()}}else f.removeClass(T);f.removeClass(W);if(t.dimensionsMap.length>
1){if(d[b.STRING_STYLE]!==b.CLASS_FOR_VODD_UNAVAILABLE)v(f).find("."+la).hide(),v(f).find("."+V).show();else if(v(f).find("."+la).show(),v(f).find("."+V).hide(),v(f).find("."+ma).length){v(f).find(".unavailableV1").addClass("aok-hidden");v(f).find(".unavailableV2").removeClass("aok-hidden");var j=f,d=t.initialTwisterState.getCurrentDimCombID().split("_"),g=[],i=parseInt(t.dimensionOrder),j=p(j[0].id);d[i]=j;for(var j=d.join("_"),j=t.twisterControllerHandle.twisterAvailabilityCache.gAsinToRender(j,
i),j=Q[j],h=0;h<d.length;h++)i!==h&&g.push(X[h][j[h]]);d=g.join(", ");v(f).find("."+na).text(d);a:{i=f;d=0;g=parseInt(t.dimensionOrder);i=parseInt(p(i[0].id));for(asin in Q)if(parseInt(Q[asin][g])===i&&++d>1){d=!0;break a}d=!1}d||v(f).find("."+ma).hide()}else{d=t.initialTwisterState.getCurrentDimCombID().split("_");g=[];for(i=0;i<d.length;i++)parseInt(t.dimensionOrder)!==i&&(j=oa[i].toLowerCase(),g.push(j+": "+X[i][d[i]]));d=g.join(", ");v(f).find("."+na).text(d)}v(f).find("."+ia).hide();v(f).find("."+
ja).hide();v(f).find("."+ha).hide();v(f).find("."+fa).hide();v(f).find("."+ea).hide();v(f).find("."+ga).hide();v(f).find("."+ka).hide();v(f).find("i."+da).addClass(R);v(f).find("i."+ca).addClass(R)}}a=E.find("tr");c=a.index(c);e=a.length-M;c>e?(c=e,c<0&&(c=0)):c=c==0?c:c-1;a=a.slice(c,c+M);D(a)}var t=this,v=o.$,B,$,X,oa,L,H,E,G,S,pa,qa,ra,sa,U,N,R="hidden",T="vodd-row-selected",W="vodd-row-hovered",Ia="vodd-dimension-img",ka="lazy-loaded-data",V="vodd-loading-placeholder",Z="vodd-modified-popover",
da="prime",ca="fresh",fa="price",ga="ppu",ha="sns",na="variation-combination-text",ma="variation-more-text",la="unavailable-text",ja="outofstock-text",ia="availability-message",ea="price-hidden",Fa=2E4,za=200,Ea=",",aa,M=6,Ga=6,Aa=33,Da="377",ua=300,ta=100,wa=50,va="5px",xa="10px",Y="animation-start",K=!1,F,ba,Q,O,J,I,ya="TwisterVODD.showPopup",Ba="TwisterVODD.hidePopup",Ca="TwisterVODD.updatePopupPosition",Ha="TwisterVODD.dimensionRowClick";t.updateView=function(a){a[b.STRING_EVENT_TYPE]===b.EVENT_TYPE_CLICK&&
(B&&B.hide(),A(a[b.STRING_DIM_COMB_ID]))};t.showVariationSelection=function(){l.isTouchDevice()||t.dimensionButton.trigger("click")};(function(){t.dimensionName=i[b.STRING_DIM_NAME];t.dimensionOrder=i[b.STRING_DIM_ORDER];t.twisterControllerHandle=i[b.STRING_TWISTER_CONTROLLER_HANDLE];t.dimValuesDisplayData=i[b.STRING_DIMENSION_VALUES_DATA];t.displayConfigStylesData=i[b.STRING_DISPLAY_CONFIG_STYLES_DATA];t.initialTwisterState=i[b.STRING_TWISTER_INITIAL_STATE_KEY];t.dimensionsMap=i[b.STRING_DIMENSIONS_MAP];
J=t.twisterControllerHandle.logger;I=J.eventTypes;X=t.initialTwisterState.twisterAvailabilityCache.twisterVariationsData.dimensionValuesData;oa=t.twisterControllerHandle.twisterJSInitData.dimensionsDisplay;ba=t.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;Q=t.twisterControllerHandle.twisterJSInitData.asinToDimIndexMapData;if(!t.initialTwisterState.asinDimensionValuesInfo)t.initialTwisterState.asinDimensionValuesInfo={};O=[];ra=b.ID_SELECTOR+"vodd-button-"+t.dimensionName;pa=b.ID_SELECTOR+
"vodd-button-label-"+t.dimensionName;sa=b.ID_SELECTOR+"vodd-table-"+t.dimensionName;qa=b.ID_SELECTOR+"dimension-button-img-"+t.dimensionName;U=b.ID_SELECTOR+t.dimensionName+b.CHAR_UNDERSCORE;N="vodd-popover-"+t.dimensionName;aa="/gp/twister/variationinfo?vs=1"+(t.twisterControllerHandle.twisterJSInitData.ajaxUrlParams?t.twisterControllerHandle.twisterJSInitData.ajaxUrlParams:"")+"&asinList=";t.dimensionButton=v(ra);E=v(sa);H=E.find("tr");G=v(qa);S=v(pa);var a=Math.ceil(t.dimValuesDisplayData.length/
M);J.logImpression(I.DIM_INIT,{count:a,dimDisplayType:b.TWISTER_DIMENSION_VIEW_VODD});q()})()}});s.when("A","twister-string-constants").register("twister-dimension-views-unavailablePopover",function(o,l){function b(a,b,i,q,r){for(var c="",k=0;k<b.length;k++)k!==a&&b[k][l.STRING_IS_SELECTED]===1&&(c=c?c+", "+i[k]:i[k]);c="<strong>"+c+"</strong>";return r?q+"&nbsp;"+c:c+"&nbsp;"+q}var a=o.$;return{triggerPopover:function(d,m,i){var d=d[l.STRING_EVENT_DATA],q;if(!(typeof touchDeviceDetected!=="undefined"&&
touchDeviceDetected)){m=b(d[l.STRING_EVENT_DIV_METADATA][l.STRING_DIM_INDEX],d[l.STRING_DIMENSION_SELECTION_DATA],d[l.STRING_EVENT_DIM_INFO][l.STRING_DIMENSION_DISPLAY_MAP],m[l.STRING_UNAVAILABLE_POPOVER_STRING_VALUE],m[l.STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER]);d="ap_body";if(a.browser.msie||navigator.userAgent.match(/Trident/))d+=" styleIE";q=a("#"+i);a.AmazonPopover.displayPopover({modal:!1,showOnHover:!0,draggable:!1,showCloseButton:!1,hoverShowDelay:50,hoverHideDelay:0,width:null,closeEventInclude:"CLICK_TRIGGER",
literalContent:m,skin:"<div id='twisterPopover' class='ap_popover twisterPopoverSkin a-text-color-white'><div class='ap_header'></div><div class='"+d+"'><div class='ap_content'></div></div><div class='ap_footer'><div class='ap_middle'></div></div></div>",location:"top",locationElement:Twister.$("#"+i),align:"center",attached:!1,group:"TwisterPopover",locationOffset:[2,22],paddingLeft:5,paddingRight:5,paddingBottom:5,onShow:function(){var b=a("#twisterPopover").width();a.browser.msie?a("#twisterPopover").find(".ap_footer").find(".ap_middle").addClass("twisterPopoverArrow").css({top:"16px",
width:b-68+"px"}):a("#twisterPopover").find(".ap_footer").find(".ap_middle").addClass("twisterPopoverArrow").css({width:b-68+"px"})}},q);a("#"+i).trigger("mouseover.amzPopover")}}}});s.when("A","twister-utils","twister-string-constants","scroll-event-handler","dimensional-summary-module","a-popover","twister-logger").register("twister-IMDD",function(o,l,b,a,d,m,i){return function(a,d){function c(){o.declarative("twister-idd-button-click-"+n.dimOrder,[b.EVENT_TYPE_CLICK,b.EVENT_TYPE_MOUSEENTER,b.EVENT_TYPE_MOUSELEAVE,
b.EVENT_TYPE_MOUSEDOWN,b.EVENT_TYPE_TOUCHSTART],function(a){if(a.type===b.EVENT_TYPE_CLICK){n.modalAttachedToButton?(a="imdd-appear-"+d[b.STRING_DIM_NAME],u("#"+n.immersiveDropdownDivId+" .twister-idd-row").forceAppear({force_process:!0,$window:n.immersiveDropdownDiv,$scrollHandlerDiv:n.immersiveDropdownContentDiv,eventToBeTriggered:a})):(j(),u("#"+n.dropdownButtonId).parents().first("span").before(n.immersiveDropdownDiv),k());n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_OPENED,null);
n.immersiveDropdownDiv.css("display","block");if(!n.modalAttachedToButton)k(),n.modalAttachedToButton=1;n.immersiveDropdownContentDiv.get(0).scrollHeight>n.immersiveDropdownContentDiv.get(0).clientHeight?u(b.ID_SELECTOR+n.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"):u(b.ID_SELECTOR+n.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","none");n.immersiveDropdownDiv.css("display","none");n.immersiveDropdownDiv.css("display","block");l.disableTwisterDiv();
n.modalAttachedToButton=1;n.isDropdownOpen=1}});o.declarative("twister-idd-row-click-"+n.dimOrder,[b.EVENT_TYPE_CLICK,b.EVENT_TYPE_MOUSEENTER,b.EVENT_TYPE_MOUSELEAVE,b.EVENT_TYPE_MOUSEDOWN,b.EVENT_TYPE_TOUCHSTART],function(a){a.type===b.EVENT_TYPE_CLICK?n.twisterControllerHandle&&(n.twisterControllerHandle.handleClick(a.data),h(),n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_ROW_CLICK,null)):a.type===b.EVENT_TYPE_MOUSEENTER?n.twisterControllerHandle&&n.twisterControllerHandle.handleMouseOver(a.data):
a.type===b.EVENT_TYPE_MOUSELEAVE&&n.twisterControllerHandle&&n.twisterControllerHandle.handleMouseOut(a.data,a.data[b.STRING_DIM_INDEX],a.data[b.STRING_DIM_VALUE_INDEX])});o.declarative("twister-idd-close-button-"+n.dimOrder,[b.EVENT_TYPE_CLICK],function(a){a.type===b.EVENT_TYPE_CLICK&&(h(),n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_CLOSED,null))});u(document).ready(function(){u(document).click(function(a){a.target.id!=n.immersiveDropdownDivId&&!n.immersiveDropdownDiv.has(a.target).length&&
a.target.id!=n.dropdownButtonId&&!n.$dropdownButtonDiv.has(a.target).length&&n.isDropdownOpen&&h()})});u(document).keyup(function(a){a.keyCode==27&&h()});n.immersiveDropdownContentDiv.bind("scroll",function(){u(this).scrollTop()+u(this).innerHeight()>=this.scrollHeight?(n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_FULL_SCROLL,null),u(b.ID_SELECTOR+n.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","none")):(u(this).scrollTop()==0?u(b.ID_SELECTOR+n.immersiveDropdownDivId+
" ."+b.CLASSNAME_FOR_STYLERTOP).css("display","none"):u(b.ID_SELECTOR+n.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERTOP).css("display","block"),u(b.ID_SELECTOR+n.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"))});n.immersiveDropdownContentDiv.live("DOMMouseScroll mousewheel  wheel",function(a){var c=u(this),e=this.scrollTop,d=this.scrollHeight,f=c.height(),g=a.originalEvent.wheelDelta;typeof g=="undefined"&&(g=-a.originalEvent.deltaY);var j=g>0,i=function(){a.stopPropagation();
a.preventDefault();return a.returnValue=!1};if(!j&&-g>d-f-e)return c.scrollTop(d),u(b.ID_SELECTOR+n.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","none"),i();else if(j&&g>e)return u(b.ID_SELECTOR+n.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERTOP).css("display","none"),c.scrollTop(0),i();else c.scrollTop()+c.innerHeight()>d&&(u(b.ID_SELECTOR+n.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"),u(b.ID_SELECTOR+n.immersiveDropdownDivId+" ."+
b.CLASSNAME_FOR_STYLERTOP).css("display","block"))})}function k(){var a=navigator.platform.indexOf("Win")>-1,c=n.immersiveDropdownContentDiv.scrollTop()+n.immersiveDropdownContentDiv.get(0).scrollHeight>n.immersiveDropdownContentDiv.outerHeight()+15;if(c){var e=parseInt(n.immersiveDropdownDiv.width())+25+"px";n.immersiveDropdownDiv.css("width",e);a&&(a=parseInt(u(b.ID_SELECTOR+n.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).width())-21+"px",u(b.ID_SELECTOR+n.immersiveDropdownDivId+" ."+
b.CLASSNAME_FOR_STYLERBOTTOM).css("width",a),u(b.ID_SELECTOR+n.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERTOP).css("width",a))}c&&n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR,null)}function h(){l.enableTwisterDiv();n.immersiveDropdownDiv.css("display","none");n.isDropdownOpen=0}function j(){var a="imdd-appear-"+d[b.STRING_DIM_NAME];u("#"+n.immersiveDropdownDivId+" .twister-idd-row").appearedInTwisterImmersiveView({force_process:!0,$window:n.immersiveDropdownDiv,
$scrollHandlerDiv:n.immersiveDropdownContentDiv,eventToBeTriggered:a});o.on(a,function(a){for(a=a[0].slice(0);a.length;)n.requestStack.push(a.splice(0,n.maxBatchLimitForIMDD));f()})}function f(){if(!(n.requestStack.length<=0)&&n.noOfOngoingConnections!==MAX_AJAX_CONNECTIONS_ALLOWED){n.noOfOngoingConnections++;for(var a=n.requestStack.shift(),b=[],c=0,d=a.length;c<d;c++){var g=u(a[c]),g=n.immersiveDropdownDiv.find("#"+g.attr("id")).closest(".a-declarative"),j=g.attr("data-action"),g=JSON.parse(g.attr("data-"+
j)).dimValueIndex;b.push(g)}e(b);f()}}function g(a){if(n.initData.fnToDetermineSelectedVariations){if(typeof n.initData.fnToDetermineSelectedVariations==="function")n.currentDimCombOnGlance=n.initData.fnToDetermineSelectedVariations.call(n)}else n.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,n.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID;return a?n.currentDimCombOnGlance.split("_"):n.currentDimCombOnGlance}function m(a){var b=g(!0);
b[a]=n.symbolForTriggeringDim;var b=b.join("_"),c={},e={},a=A[a];if(!n.mapOfDimToAsinMaps[b]){for(var d=0,f=a.length;d<f;d++){var j=b.replace(n.symbolForTriggeringDim,d);(j=t[j])?(c[a[d]]=j,e[j]=a[d]):c[a[d]]=""}c&&(n.mapOfDimToAsinMaps[b]=c);e&&(n.mapOfAsinToDimMaps[b]=e)}}function w(a,b){var c=[],e;e=g(!0).slice(0);e[b]=n.symbolForTriggeringDim;e=e.join("_");e=n.mapOfDimToAsinMaps[e];for(var d=s(),f=A[b],j=0,i=a.length;j<=i;j++){var h=a[j],k=f[h];k&&((k=e[k])?c.push(k):(h=u("#"+ROW_ID_PREFIX+n.dimensionName+
"_"+h+" .idd_loading_slot_0"),d||h.html("<span class='a-color-tertiary'>- -</span>")))}return c}function e(a){var c={};c.indices=a;c.dimTriggeringDimSum=d[b.STRING_DIM_NAME];c.dimType=n.dimType;var e=dimensionsList.indexOf(c.dimTriggeringDimSum);m(e);c.asinList=w(a,e,c);c.asinList.length==0?(n.noOfOngoingConnections--,f()):(c.dimCombId=g(!1),c.executeChunk=function(){var a=DetailPage.StateController.getState().currentDimCombID,b=a.split("_"),e=c.dimCombId.split("_");if(c.dimCombId===a)return!0;else if(!l.isPartialState(n.dimensionsMap.length)){for(var a=
n.dimensionsMap.length,d=!0,f=0;f<a;f++)if(f!==parseInt(n.dimOrder)&&e[f]!==b[f]){d=!1;break}return d}return!1},c.chunk=function(a,b){a.dimensionValue=dimensionsList[b.dimIndexTriggeringDimSum]+"_"+A[b.dimIndexTriggeringDimSum].indexOf(n.mapOfAsinToDimMaps[b.hashKey][a.ASIN]);var c=u("#"+ROW_ID_PREFIX+a.dimensionValue+" .idd_loading_slot_0");c.html(a.Value.content.twisterSlotDiv["0"]);c=u("#"+ROW_ID_PREFIX+a.dimensionValue+" .idd_loading_slot_1");c.html(a.Value.content.twisterSlotDiv["1"])},c.success=
function(){n.noOfOngoingConnections--;f()},c.error=function(){n.noOfOngoingConnections--;f()},c.abort=function(){n.noOfOngoingConnections--;f()},Twister.dimensionalSummaryModule.fetchDimSumData(c))}function p(a){var c=u("#"+ROW_ID_PREFIX+n.dimensionName+b.CHAR_UNDERSCORE+a),a=[],e;if(c.length>0)for(var a=c.get(0).className.split(" "),c=0,d=a.length;c<d;c++){var f=a[c];if(f.indexOf("twister-idd-row-")===0){e=f;break}}return e}function x(a,c,e){a=u("#"+ROW_ID_PREFIX+n.dimensionName+b.CHAR_UNDERSCORE+
a);c!==e&&(c==void 0?u(a).addClass(e):u(a).removeClass(c).addClass(e))}function y(a,c){var e=u("#"+ROW_ID_PREFIX+n.dimensionName+b.CHAR_UNDERSCORE+a+" .idd_loading_slot_0 ."+b.PRICE_SLOT_CLASS_NAME),d=b.CLASS_FOR_PRICE_SECONDARY;if(c===v||c===b.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||c===CLASS_FOR_IDD_ROW_HOVER)d=b.CLASS_FOR_PRICE_SELECTED;e.length&&e.removeClass(b.CLASS_FOR_PRICE_SECONDARY+" "+b.CLASS_FOR_PRICE_SELECTED+" a-color-tertiary").addClass(d)}function z(a,b){DetailPage.StateController.getState();
b?(u("#"+n.dropdownButtonId+" #"+ID_FOR_BUTTON_SELECTION).html(a).addClass("hover"),u("#"+n.immersiveDropdownDivId+" #"+ID_FOR_MODAL_SELECTION).html(a).addClass("hover")):(u("#"+n.dropdownButtonId+" #"+ID_FOR_BUTTON_SELECTION).html(a).removeClass("hover"),u("#"+n.immersiveDropdownDivId+" #"+ID_FOR_MODAL_SELECTION).html(a).removeClass("hover"))}function s(){for(var a=n.dimensionsMap.length,b=DetailPage.StateController.getState().currentDimCombID.split("_"),c=!1,e=0;e<a;e++)if(e!==parseInt(n.dimOrder)&&
b[e]==="X"){c=!0;break}return c}var n=this,u=o.$,A,t,v="twister-idd-row-selected";CLASS_FOR_IDD_ROW_HIDDEN="twister-idd-row-hidden";CLASS_FOR_IDD_ROW_HOVER="twister-idd-row-hover";ID_FOR_MODAL_SELECTION="twister-idd-modal-selection";ID_FOR_BUTTON_SELECTION="twister-idd-button-selection";ROW_ID_PREFIX="twister_idd_";DEFAULT_DISPLAY_VALUE="Select";n.symbolForTriggeringDim="*";n.currentDimCombOnGlance="";n.twisterFeatureDiv=u("#twister_feature_div");n.mapOfDimToAsinMaps={};n.mapOfAsinToDimMaps={};n.updateView=
function(a){if(a[b.STRING_EVENT_TYPE]===b.EVENT_TYPE_MOUSEOVER){var c,e;c=a[b.STRING_EVENT_DATA];var d=c[b.STRING_EVENT_DIM_INFO][b.STRING_DIMENSION_VALUES_DATA][n.dimOrder];c=c[b.STRING_EVENT_DIV_METADATA];if(n.dimOrder==c[b.STRING_DIM_INDEX])p(c[b.STRING_DIM_VALUE_INDEX]),a=l.getDimStyleData(a.dimCombID,n.dimValuesDisplayData.length,n.dimOrder,n.twisterControllerHandle.twisterAvailabilityCache,n.displayConfigStylesData),c.dimValueIndex===-1?z(DEFAULT_DISPLAY_VALUE,!0):z(d,!0),d=c.dimValueIndex,
d>-1&&(a=a[d],a=a[b.STRING_STYLE],c=p(d),e=c===v?!0:!1,e||(a===v&&(a=c==="twister-idd-row-unavailable"?"twister-idd-row-unavailable-hover":CLASS_FOR_IDD_ROW_HOVER,y(d,a)),x(d,c,a)))}else{eventData=a[b.STRING_EVENT_DATA];eventDimInfo=eventData[b.STRING_EVENT_DIM_INFO];dimensionValueDisplay=eventDimInfo[b.STRING_DIMENSION_VALUES_DATA][n.dimOrder];divMetaData=eventData[b.STRING_EVENT_DIV_METADATA];dimensionSelectionData=eventData[b.STRING_DIMENSION_SELECTION_DATA];dimCombID=a.dimCombID;dimDataForThisInteraction=
l.getDimStyleData(dimCombID,n.dimValuesDisplayData.length,n.dimOrder,n.twisterControllerHandle.twisterAvailabilityCache,n.displayConfigStylesData);if(dimensionSelectionData[n.dimOrder][b.STRING_IS_SELECTED]===0){if(a.eventType==="click"&&(e=p("-1")))e=p("-1"),x("-1",e,v);z(DEFAULT_DISPLAY_VALUE,!1)}else{if(a.eventType==="click"&&(e=p("-1")))e=p("-1"),x("-1",e,"twister-idd-row-available");z(dimensionValueDisplay,!1)}d=0;for(a=dimDataForThisInteraction.length;d<a;d++){c=dimDataForThisInteraction[d];
c=c[b.STRING_STYLE];if(dimensionSelectionData[n.dimOrder][b.STRING_IS_SELECTED]===0&&c===b.CLASS_FOR_SWATCH_SELECT)c=b.CLASS_FOR_SWATCH_AVAILABLE;if(e=p(d))e=p(d),x(d,e,c),y(d,c)}}};n.updateViewAfterTwisterUpdate=function(c){var e=c[b.STRING_EVENT_DATA][b.STRING_DIMENSION_SELECTION_DATA][n.dimOrder][b.STRING_IS_SELECTED],c=s();if(l.isPartialState(n.dimensionsMap.length)&&(e||z(DEFAULT_DISPLAY_VALUE,!1),c)){for(var e=A[n.dimOrder].length,d=0;d<e;d++)u("#"+ROW_ID_PREFIX+n.dimensionName+"_"+d+" .idd_loading_slot_1").css("display",
"none"),u("#"+ROW_ID_PREFIX+n.dimensionName+"_"+d+" .idd_loading_slot_0").css("display","none");Twister.multiDimensionWeblabEnabled&&Twister.immersiveBannersPresent&&(e=l.getImmersivePartialStateBannerContent(a,parseInt(n.dimOrder)),u("#twisterImmersiveDropdownBanner_"+n.dimOrder).html(e))}if(!c){c=A[n.dimOrder].length;for(e=0;e<c;e++)d=u("#"+ROW_ID_PREFIX+n.dimensionName+"_"+e+" .idd_loading_slot_1"),d.html(""),d.css("display",""),d=u("#"+ROW_ID_PREFIX+n.dimensionName+"_"+e+" .idd_loading_slot_0"),
d.html("Loading details..."),d.css("display","");Twister.multiDimensionWeblabEnabled&&Twister.immersiveBannersPresent&&(c=l.getImmersiveFullStateBannerContent(a,parseInt(n.dimOrder)),u("#twisterImmersiveDropdownBanner_"+n.dimOrder).html(c))}u("#"+n.immersiveDropdownDivId+" .twister-idd-row").invalidateAppearedAlreadyCache()};(function(){n.dimensionName=d[b.STRING_DIM_NAME];n.dimOrder=d[b.STRING_DIM_ORDER];n.twisterControllerHandle=d[b.STRING_TWISTER_CONTROLLER_HANDLE];n.dimValuesDisplayData=d[b.STRING_DIMENSION_VALUES_DATA];
n.displayConfigStylesData=d[b.STRING_DISPLAY_CONFIG_STYLES_DATA];n.initialTwisterState=d[b.STRING_TWISTER_INITIAL_STATE_KEY];n.dimensionsMap=d[b.STRING_DIMENSIONS_MAP];n.dropdownButtonId="twister-idd-button-"+n.dimensionName;n.$dropdownButtonDiv=u("#"+n.dropdownButtonId);n.immersiveDropdownDivId="twister-idd-modal-"+n.dimensionName;n.immersiveDropdownDiv=u("#"+n.immersiveDropdownDivId);n.immersiveDropdownContentDiv=u("#twister-idd-table_"+n.dimensionName);n.immersiveDropdownButtonId="twister-idd-table_"+
n.dimensionName;n.requestStack=[];n.maxBatchLimitForIMDD=8;n.MAX_AJAX_CONNECTIONS_ALLOWED=2;n.noOfOngoingConnections=0;n.dimType="Dropdown";n.modalAttachedToButton=0;A=n.initialTwisterState.twisterAvailabilityCache.twisterVariationsData.dimensionValuesData;t=n.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;dimensionsList=n.twisterControllerHandle.twisterJSInitData.dimensions;n.initData={};n.initData.scopeSuffix="twister";n.symbolForTriggeringDim="*";n.displayConfigStylesData.available=
"twister-idd-row-available";n.displayConfigStylesData.invalid="twister-idd-row-unavailable";n.displayConfigStylesData.selected=v;n.displayConfigStylesData.hidden=CLASS_FOR_IDD_ROW_HIDDEN;n.logger=new i(u,this,Twister.multiDimensionWeblabEnabled?"ImmersiveMultiDimensionView":"ImmersiveDropdownSingleDimensionView");n.logger.init();n.isDropdownOpen=0;c()})()}});s.when("A","dp-js-logger").register("twister-logger-service",function(o,l){return function(b,a,d){var m=new l,i=d||"";this.logCounters=function(a){b.each(a,
function(a,b){var d=i+":"+b.name;Twister.printConsoleLogs&&console.log("Logging metric: "+d+" -> "+b.value);m.logCounter(d,b.value)})};this.init=function(){var d=this;b(window).bind("beforeunload",function(){var b=a.getDataToUploadOnUnload();d.logCounters(b);return null})}}});s.when("A","twister-logger-service","twister-string-constants").register("twister-logger",function(o,l,b){return function(a,d,m){function i(a){if(!a)return null;var c=d.jsInteractionEnabledTime||Date.now();return(a[b.TWISTER_EVENT_DATA_TIME]||
Date.now())-c}function q(a){if(a.hasOwnProperty("getMetricData"))return a.getMetricData();var b=a.stringVal,a=a.hasOwnProperty("getUploadValue")?a.getUploadValue():a.hasOwnProperty("currentValue")?a.currentValue:a.initValue;return isNaN(a)?null:{value:a,name:b}}var o=this,c;this.createFunctionTimer=function(a){return{eventType:a,start:function(){this.startTime=Date.now()},stop:function(){o.logImpression(this.eventType,{duration:Date.now()-this.startTime})}}};this.eventTypes={CLICK:{metricList:["M_CLICK_COUNT",
"M_FIRST_CLICK"]},IMMERSIVE_DROPDOWN_OPENED:{metricList:["IMMERSIVE_DROPDOWN_OPEN_COUNT"]},IMMERSIVE_DROPDOWN_CLOSED:{metricList:["IMMERSIVE_DROPDOWN_CLOSE_COUNT"]},IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR:{metricList:["IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR_COUNT"]},IMMERSIVE_DROPDOWN_FULL_SCROLL:{metricList:["IMMERSIVE_DROPDOWN_FULL_SCROLL_COUNT"]},IMMERSIVE_DROPDOWN_ROW_CLICK:{metricList:["IMMERSIVE_DROPDOWN_ROW_CLICK_COUNT"]},IMMERSIVE_DROPDOWN_SCROLL:{metricList:["IMMERSIVE_DROPDOWN_SCROLL_COUNT"]},
IMMERSIVE_OPTION_CLICK:{metricList:["M_IMMERSIVE_CLICK_COUNT"]},IMMERSIVE_SWATCH_CLICK:{metricList:["M_IMMERSIVE_SWATCH_CLICK_COUNT"]},IMMERSIVE_MODAL_CLOSE_CLICK:{metricList:["M_IMMERSIVE_CLOSE_CLICK_COUNT"]},IMMODAL_VISIBLE_SCROLLBAR:{metricList:["M_IMMERSIVE_VISIBLE_SCROLL_COUNT"]},IMMODAL_FULL_SCROLL:{metricList:["M_IMMERSIVE_FULL_SCROLL_COUNT"]},HOVER:{metricList:["M_HOVER_COUNT","M_FIRST_HOVER"]},HOVER_OUT:[],CACHE_HIT:{metricList:["M_CACHE_HIT","M_CACHE_USED"]},CACHE_MISS:{metricList:["M_CACHE_MISS",
"M_CACHE_USED"]},PAGE_UNLOAD:{metricList:["M_CACHE_UNUSED","M_CACHE_HIT_RATIO","M_CACHE_USED_RATIO"]},REQ_DIM_CHANGED:{metricList:["M_OTHER_REQ_DIM_SELECTED_COUNT","M_REQ_DIM_CHANGE_COUNT"]},DIM_SUM_LOAD:{metricList:["M_DIM_SUM_LOAD"]},CLICK_NA:{metricList:["M_NA_CLICK_COUNT"]},DIM_INIT:{metricList:["M_DIM_PAGENATION_COUNT"]},SCROLL:{metricList:["M_VIEWED_DIM_COUNT"]},CLICK_VARIATION:{metricList:["M_DIM_CLICK_VIEWED_DIM_COUNT"]}};var k=function(c,d){this.stringVal=d;this.initValue=NaN;this.deferLogging=
!0;this.pagenationCountName=c;this.updateFunction=function(a){var c=Math.ceil(a[b.TWISTER_EVENT_DATA_PERCENTAGE]/25)*25,d=a[b.TWISTER_EVENT_DATA_DIV_METADATA][b.STRING_DIM_INDEX];if(!this.metrics)this.metrics={};this.metrics[d]||(this.metrics[d]={});if((this.metrics[d].percentage||0)<c)this.metrics[d].percentage=c;this.metrics[d].pageCount=a[b.TWISTER_EVENT_DATA_COUNT];this.metrics[d].dimDisplayType=a[b.TWISTER_EVENT_DATA_DISPLAY_TYPE];Twister.printConsoleLogs&&console.log(this.stringVal+": index - "+
d+" page - "+this.metrics[d].pageCount+" percentage - "+this.metrics[d].percentage)};this.getMetricData=function(){if(this.metrics){var b=[],c=this;a.each(this.metrics,function(a,e){var d=c.pagenationCountName+e.pageCount;e.dimDisplayType&&(d=e.dimDisplayType+":"+d);b.push({name:d+"_"+(c.stringVal+e.percentage),value:1})});return b}}},h={M_CACHE_HIT:{stringVal:"CacheHit",initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue=this.currentValue>0?this.currentValue+1:1;Twister.printConsoleLogs&&
console.log("incrementing cacheHit count to "+this.currentValue)}},M_CACHE_MISS:{stringVal:"CacheMiss",initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue=this.currentValue>0?this.currentValue+1:1}},M_CACHE_HIT_RATIO:{stringVal:"CacheHitRatio",initValue:NaN,deferLogging:!0,updateFunction:function(){var a=o.getMetricCurrentValue("M_CACHE_HIT"),b=o.getMetricCurrentValue("M_CACHE_MISS");if(a||b)this.currentValue=Math.round(a/(a+b)*100)}},M_CACHE_USED:{stringVal:"CacheUsed",initValue:0,
deferLogging:!0,updateFunction:function(a){if(!this.currentValue)this.currentValue=this.initValue,this.usedIdCache={};a=a.id;this.usedIdCache.hasOwnProperty(a)||(this.currentValue++,this.usedIdCache[a]=!0)}},M_CACHE_UNUSED:{stringVal:"CacheUnused",initValue:0,deferLogging:!0,updateFunction:function(){var a=d.twisterModel.pageRefresh.getModelCacheSize("full")-o.getMetricCurrentValue("M_CACHE_USED");this.currentValue=a<0?0:a}},M_CACHE_USED_RATIO:{stringVal:"CacheUsedRatio",initValue:NaN,deferLogging:!0,
updateFunction:function(){var a=o.getMetricCurrentValue("M_CACHE_USED"),b=o.getMetricCurrentValue("M_CACHE_UNUSED");if(a||b)this.currentValue=Math.round(a/(a+b)*100)}},M_FIRST_CLICK:{stringVal:"FirstClick",initValue:NaN,deferLogging:!0,updateFunction:function(a){if(!this.firstClickLogged)this.currentValue=i(a),Twister.printConsoleLogs&&console.log("first click = "+this.currentValue),this.firstClickLogged=!0}},M_CLICK_COUNT:{stringVal:"ClickCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue=
1;Twister.printConsoleLogs&&console.log("incrementing click count to "+this.currentValue)}},M_HOVER_COUNT:{stringVal:"HoverCount",initValue:0,deferLogging:!0,updateFunction:function(a){a=a.divMetaData;if(!this.lastHoveredDivMetaData||!a||!(this.lastHoveredDivMetaData.dimIndex===a.dimIndex&&this.lastHoveredDivMetaData.dimValueIndex===a.dimValueIndex))this.lastHoveredDivMetaData=a,this.currentValue=this.currentValue>0?this.currentValue+1:1,Twister.printConsoleLogs&&console.log("incrementing hover count to "+
this.currentValue)}},M_FIRST_HOVER:{stringVal:"FirstHover",initValue:NaN,deferLogging:!0,updateFunction:function(a){if(!this.firstHoverLogged)this.currentValue=i(a),Twister.printConsoleLogs&&console.log("first hover = "+this.currentValue),this.firstHoverLogged=!0}},M_OTHER_REQ_DIM_SELECTED_COUNT:{stringVal:"OtherReqDimSelectedCount",initValue:NaN,deferLogging:!0,updateFunction:function(a){var b=a.newReqDimValueIndex,a=a.oldReqDimValueIndex;if(b==="X"){if(!this.currentValue)this.lastReqDimValueIndex=
a,this.currentValue=0}else if(this.lastReqDimValueIndex!==b)this.lastReqDimValueIndex=b,!this.currentValue&&this.currentValue!==0?a==="X"?this.currentValue=0:this.currentValue=1:this.currentValue++,Twister.printConsoleLogs&&console.log("OtherReqDimSelectedCount incremented to : "+this.currentValue)}},M_REQ_DIM_CHANGE_COUNT:{stringVal:"ReqDimChangeCount",initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("ReqDimChangeCount incremented to : "+
this.currentValue)):this.currentValue=1}},M_DIM_SUM_LOAD:{stringVal:"DimSumLoadingDuration",initValue:NaN,deferLogging:!1,updateFunction:function(a){this.currentValue=a[b.TWISTER_EVENT_DATA_DURATION];Twister.printConsoleLogs&&console.log("DimSumLoadingDuration: "+this.currentValue)}},M_NA_CLICK_COUNT:{stringVal:"NAClickCount",initValue:NaN,deferLogging:!0,updateFunction:function(){this.currentValue=(this.currentValue||0)+1;Twister.printConsoleLogs&&console.log("NAClick incremented to: "+this.currentValue)}},
M_DIM_PAGENATION_COUNT:{stringVal:"DimPageCount",initValue:1,deferLogging:!1,updateFunction:function(a){this.pageCount=a[b.TWISTER_EVENT_DATA_COUNT]||1;this.dimDisplayType=a[b.TWISTER_EVENT_DATA_DISPLAY_TYPE];Twister.printConsoleLogs&&console.log("DimPageCount: "+this.pageCount)},getMetricData:function(){var a=this.stringVal+(this.pageCount||1);this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:1}}},M_VIEWED_DIM_COUNT:new k("DimPageCount","ViewedVariationCount"),M_DIM_CLICK_VIEWED_DIM_COUNT:new k("DimPageCount",
"ViewedVariationCountBeforeClick"),IMMERSIVE_DROPDOWN_ROW_CLICK_COUNT:{stringVal:"ImmersiveDropdownRowClickCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Row Click Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_OPEN_COUNT:{stringVal:"ImmersiveDropdownOpenedCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,
Twister.printConsoleLogs&&console.log("Immsersive Dropdown Opened Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_CLOSE_COUNT:{stringVal:"ImmersiveDropdownClosedCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Closed Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR_COUNT:{stringVal:"ImmersiveDropdownScrollBarCount",
initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Visible Scroll Bar Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_FULL_SCROLL_COUNT:{stringVal:"ImmersiveDropdownFullScrollCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Full Scroll Count incremented to : "+
this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_SCROLL_COUNT:{stringVal:"ImmersiveDropdownScrollCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Scroll Count incremented to : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_CLICK_COUNT:{stringVal:"ImmersiveClickCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&
console.log("Immsersive Click Count incremented to : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_SWATCH_CLICK_COUNT:{stringVal:"ImmersiveSwatchClickCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive swatch click Count incremented to : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_CLOSE_CLICK_COUNT:{stringVal:"ImmersiveCloseClickCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?
(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive modal close click count : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_VISIBLE_SCROLL_COUNT:{stringVal:"ImmersiveScrollBarCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive modal scrollBar count : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_FULL_SCROLL_COUNT:{stringVal:"ImmersiveFullScrollCount",initValue:0,deferLogging:!1,
updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive modal full scroll down count : "+this.currentValue)):this.currentValue=1}}};this.init=function(){c=m!==void 0?new l(a,this,m):new l(a,this);c.init()};this.logImpression=function(b,d){try{a.each(b.metricList,function(a,b){try{var e=h[b];e.updateFunction(d);h[b].deferLogging||c.logCounters(Array(q(e)))}catch(g){Twister.printConsoleLogs&&console.log("metricUpdate failing for metric = "+b)}})}catch(g){Twister.printConsoleLogs&&
console.log("logImpression failed")}};this.getDataToUploadOnUnload=function(){this.logImpression(this.eventTypes.PAGE_UNLOAD);var b=[];a.each(h,function(c,d){try{if(d.deferLogging){var i=q(d);i&&(a.isArray(i)?b=a.merge(i,b):b.push(i))}}catch(h){}});return b};this.getMetricCurrentValue=function(a){try{return h[a].hasOwnProperty("currentValue")?h[a].currentValue:h[a].initValue}catch(b){return h[a].initValue}}}});s.when("A").register("twister-availabilty-cache",function(){return function(o){function l(b,
m){var i=b+":"+m,q=b.split("_"),o=q.length,c=-1,k,h;if(a.asinToRenderCache[i]!==null&&a.asinToRenderCache[i]!==void 0)return a.asinToRenderCache[i];a.intermediateAsinToRenderCache[i]=!0;for(i=0;i<o;i++)if(q[i]==="X"){c=i;break}if(c===-1)return k=null,a.twisterVariationsData.dimToAsinMapData[b]!=null&&(k=a.twisterVariationsData.dimToAsinMapData[b]),k;for(var o=a.twisterVariationsData.dimensionValuesData[c].length,j=0;j<o;j++)if(q[c]=j,i=q.join("_"),h=i+":"+m,!a.intermediateAsinToRenderCache.hasOwnProperty(h)&&
(k=l(i,m),k!==null&&k!==void 0))break;return k}function b(b){for(var m in a.intermediateAsinToRenderCache)a.asinToRenderCache[m]=b,delete a.intermediateAsinToRenderCache[m];a.intermediateAsinToRenderCache={}}var a=this;a.twisterVariationsData=o;a.dimAvailabilityCache={};a.asinToRenderCache={};a.intermediateAsinToRenderCache={};a.isUpdateCacheReq=!1;a.isDimCombinationAvailable=function(b){var m=b.split("_"),i,l=-1,o,c;i=m.length;if(a.dimAvailabilityCache[b]!==null&&a.dimAvailabilityCache[b]!==void 0)return a.dimAvailabilityCache[b];
for(c=0;c<i;c++)if(m[c]==="X"){l=c;break}if(l===-1)return o=!1,a.twisterVariationsData.dimToAsinMapData[b]!==null&&a.twisterVariationsData.dimToAsinMapData[b]!==void 0&&(o=!0),a.dimAvailabilityCache[b]=o;i=a.twisterVariationsData.dimensionValuesData[l].length;for(var k=0;k<i;k++)if(m[l]=k,c=m.join("_"),a.dimAvailabilityCache[c]!==null&&a.dimAvailabilityCache[c]!==void 0?o=a.dimAvailabilityCache[c]:(o=a.isDimCombinationAvailable(c),a.dimAvailabilityCache[c]=o),o)break;return a.dimAvailabilityCache[b]=
o};a.gAsinToRender=function(d,m){var i=null,q,o,c=d.split("_"),k=c.length,h=d+":"+m;if(a.asinToRenderCache[h]!==null&&a.asinToRenderCache[h]!==void 0){if(a.isUpdateCacheReq)b(a.asinToRenderCache[h]),a.isUpdateCacheReq=!1;return a.asinToRenderCache[h]}if(!a.isUpdateCacheReq)a.isUpdateCacheReq=!0;a.intermediateAsinToRenderCache.hasOwnProperty(h)||(i=l(d,m));if(i!==null&&i!==void 0){if(a.isUpdateCacheReq)c[m]==="X"?(a.asinToRenderCache[h]=i,a.intermediateAsinToRenderCache={}):b(i),a.isUpdateCacheReq=
!1;return i}for(h=0;h<k;h++)if(!(h==m||c[h]=="X"))if(i=c[h],c[h]="X",q=c.join("_"),o=q+":"+m,c[h]=i,!a.intermediateAsinToRenderCache.hasOwnProperty(o)&&(i=l(q,m),i!==null&&i!==void 0)){if(a.isUpdateCacheReq)b(i),a.isUpdateCacheReq=!1;return i}i=-1;for(h=0;h<k;h++)if(c[h]!=="X"&&h!==m){i=h;break}if(i===-1)return"";c[i]="X";q=c.join("_");return a.gAsinToRender(q,m)}}});s.when("A","twister-modal","twister-string-constants","twister-logger").register("twister-dimension-views-ingress",function(o,l,b,a){return function(d,
m){var i=this,q=o.$;i.dimensionData=d;if(Twister.multiDimensionWeblabEnabled)var r="ImmersiveMultiDimensionView";else Twister.isImmersiveExperience&&(r="ImmersiveSwatchSingleDimensionView");i.logger=r!==void 0?new a(q,this,r):new a(q,this);i.logger.init();i.twisterJSInitData=m;i.modalHandle=new l(d,i.twisterJSInitData);i.ingressDiv="#"+b.TWISTER_INGRESS_ID_PREFIX+d.dimName;(function(){o.declarative(b.AUI_EVENT_FOR_INGRESS_PREFIX+d.dimOrder,[b.EVENT_TYPE_CLICK,b.EVENT_TYPE_TOUCHSTART],function(a){a.type===
b.EVENT_TYPE_CLICK&&(i.logger.logImpression(i.logger.eventTypes.IMMERSIVE_OPTION_CLICK,null),i.modalHandle.openTwisterModal())});q(document).ready(function(){q(document).click(function(a){var d=i.modalHandle.twisterModalDiv;q("#"+b.TWISTER_FEATURE_DIV_ID);a.target.id!=d.attr("id")&&!d.has(a.target).length&&a.target.id!=q(i.ingressDiv).attr("id")&&!q(i.ingressDiv).has(a.target).length&&i.modalHandle.closeTwisterModal()})})})()}});s.when("A","twister-utils","scroll-event-handler","twister-modal-resize-helper",
"twister-string-constants","twister-logger").register("twister-modal",function(o,l,b,a,d,m){window.MAX_AJAX_CONNECTIONS_ALLOWED=2;return function(b,q){function r(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function c(){o.declarative(d.AUI_EVENT_CLOSE_MODAL_PREFIX+b.dimName,[d.EVENT_TYPE_CLICK,d.EVENT_TYPE_TOUCHSTART],function(a){a.type===d.EVENT_TYPE_CLICK&&(e.logger.logImpression(e.logger.eventTypes.IMMERSIVE_MODAL_CLOSE_CLICK,null),e.closeTwisterModal())});
p(document).keyup(function(a){a.keyCode==27&&e.closeTwisterModal()});e.twisterModalContentDiv.bind("scroll",function(){p(this).scrollTop()+p(this).innerHeight()>=this.scrollHeight?(e.logger.logImpression(e.logger.eventTypes.IMMODAL_FULL_SCROLL,null),p(d.ID_SELECTOR+e.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display","none")):(p(this).scrollTop()==0?p(d.ID_SELECTOR+e.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERTOP).css("display","none"):p(d.ID_SELECTOR+e.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERTOP).css("display",
"block"),p(d.ID_SELECTOR+e.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"))});e.twisterModalContentDiv.live("DOMMouseScroll mousewheel  wheel",function(a){var b=p(this),c=this.scrollTop,f=this.scrollHeight,g=b.height(),i=a.originalEvent.wheelDelta;typeof i=="undefined"&&(i=-a.originalEvent.deltaY);var h=i>0,k=function(){a.stopPropagation();a.preventDefault();return a.returnValue=!1};if(!h&&-i>f-g-c)return b.scrollTop(f),p(d.ID_SELECTOR+e.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display",
"none"),k();else if(h&&i>c)return p(d.ID_SELECTOR+e.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERTOP).css("display","none"),b.scrollTop(0),k();else p(d.ID_SELECTOR+e.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"),p(d.ID_SELECTOR+e.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERTOP).css("display","block")})}function k(){return l.isPartialState(e.dimensions.length)}function h(){var a=d.AUI_EVENT_VISIBILITY_PREFIX+e.dimName;p(d.ID_SELECTOR+e.twisterModalDivId+" .swatches li").appearedInTwisterImmersiveView({force_process:!0,
$window:e.twisterModalDiv,$scrollHandlerDiv:e.twisterModalContentDiv,eventToBeTriggered:a,blockIsAppear:k});o.on(a,function(a){for(a=a[0].slice(0);a.length;)e.requestStack.push(a.splice(0,e.maxSwatchLimitForImmersive));j()})}function j(){if(!(e.requestStack.length<=0)&&e.noOfOngoingConnections!==MAX_AJAX_CONNECTIONS_ALLOWED){e.noOfOngoingConnections++;for(var a=e.requestStack.shift(),b=[],c=0,d=a.length;c<d;c++){var f=p(a[c]).find(".a-declarative"),g=f.attr("data-action"),f=JSON.parse(f.attr("data-"+
g)).dimValueIndex;b.push(f)}w(b);j()}}function f(a){if(e.initData.fnToDetermineSelectedVariations){if(typeof e.initData.fnToDetermineSelectedVariations==="function")e.currentDimCombOnGlance=e.initData.fnToDetermineSelectedVariations.call(e)}else e.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,e.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID;return a?e.currentDimCombOnGlance.split("_"):e.currentDimCombOnGlance}function g(a){var b=f(!0);
b[a]=e.symbolForTriggeringDim;var b=b.join("_"),c={},d={},a=dimensionValuesList[a];if(!e.mapOfDimToAsinMaps[b]){for(var g=0,i=a.length;g<i;g++){var h=b.replace(e.symbolForTriggeringDim,g);(h=dimensionToAsinMap[h])?(c[a[g]]=h,d[h]=a[g]):c[a[g]]=""}c&&(e.mapOfDimToAsinMaps[b]=c);d&&(e.mapOfAsinToDimMaps[b]=d)}}function s(a,b){var c=[],d;d=f(!0).slice(0);d[b]=e.symbolForTriggeringDim;d=d.join("_");d=e.mapOfDimToAsinMaps[d];for(var g=dimensionValuesList[b],i=0,h=a.length;i<=h;i++){var k=a[i],j=g[k];j&&
((j=d[j])?c.push(j):(k=p(".twister_"+e.dimName+"_"+k+" .twisterSlotDiv"),k.html("<span class='a-color-tertiary'>- -</span>"),k.css("display","")))}return c}function w(a){var b={};b.indices=a;b.dimTriggeringDimSum=e.dimensionData.dimName;b.dimSubType=e.dimSubType;var c=dimensionsList.indexOf(b.dimTriggeringDimSum);g(c);b.asinList=s(a,c,b);b.asinList.length==0?(e.noOfOngoingConnections--,j()):(b.dimCombId=f(!1),b.executeChunk=function(){var a=DetailPage.StateController.getState().currentDimCombID,c=
a.split("_"),d=b.dimCombId.split("_");if(b.dimCombId===a)return!0;else if(!l.isPartialState(e.dimensions.length)){for(var a=e.dimensions.length,f=!0,g=0;g<a;g++)if(g!==parseInt(e.dimOrder)&&d[g]!==c[g]){f=!1;break}return f}return!1},b.chunk=function(a,b){a.dimensionValue=dimensionsList[b.dimIndexTriggeringDimSum]+"_"+dimensionValuesList[b.dimIndexTriggeringDimSum].indexOf(e.mapOfAsinToDimMaps[b.hashKey][a.ASIN]);var c=p(".twister_"+a.dimensionValue+" .twisterSlotDiv");c.css("display","");if(Twister.multiDimensionWeblabEnabled){for(var d=
"",f=0;a.Value.content.twisterSlotDiv[f];)e.dimSubType==="IMAGE"&&(d+="<div>"),d+=a.Value.content.twisterSlotDiv[f],e.dimSubType==="IMAGE"&&(d+="</div>"),f++;c.html(d)}else c.html(a.Value.content.twisterSlotDiv)},b.success=function(){var a=r();a&&a<e.slotsEligibleWidth?e.resizeHelperHandle.fixSize(e.$twisterModalSwatches,e.swatchWrapper,e.swatchDynaWrapper,e.ingressWrapper,e):e.resizeHelperHandle.fixSize(e.$swatches,e.swatchWrapper,e.swatchDynaWrapper,e.ingressWrapper,e);e.noOfOngoingConnections--;
j()},b.error=function(){e.noOfOngoingConnections--;j()},b.abort=function(){e.noOfOngoingConnections--;j()},Twister.dimensionalSummaryModule.fetchDimSumData(b))}var e=this,p=o.$;e.dimensionData=b;e.dimOrder=e.dimensionData.dimOrder;e.centerColDivId=d.ID_SELECTOR+d.CENTER_COL_DIV_ID;e.centerColDiv=p(e.centerColDivId);e.twisterModalDivId=d.TWISTER_MODAL_ID_PREFIX+e.dimensionData.dimName;e.twisterModalDiv=p(d.ID_SELECTOR+e.twisterModalDivId);e.variationsPrefix="variation_";e.swatchWrapperClassForAnimation=
"twisterSwatchWrapper";e.swatchWrapper=".twisterSwatchWrapper_"+e.dimOrder;e.swatchDynaWrapper="twisterSwatchWrapperDynaStyle_"+e.dimOrder;e.ingressWrapper="twisterIngressWrapper_"+e.dimOrder;e.glanceSwatchContainer=d.ID_SELECTOR+e.variationsPrefix+e.dimensionData.dimName;e.twisterModalContentDiv=p(d.ID_SELECTOR+d.MODAL_CONTENTDIV_PREFIX+e.dimensionData.dimName);e.twisterModalHeaderDiv=p(d.ID_SELECTOR+d.MODAL_HEADER_PREFIX+e.dimensionData.dimName);e.twisterFeatureDiv=p(d.ID_SELECTOR+d.TWISTER_FEATURE_DIV_ID);
e.$swatches=p(e.swatchWrapper);e.$twisterModalSwatches=p(".twisterModal "+e.swatchWrapper);e.$subNav=p(d.ID_SELECTOR+"nav-subnav");e.requestStack=[];e.noOfOngoingConnections=0;e.isModalOpen=0;e.isSlotRowPopulated=!1;e.showModalFadeDuration=500;e.isIE8=p("html").hasClass("a-lt-ie9");e.slotsEligibleWidth=1100;e.windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;e.logger=new m(p,this,Twister.multiDimensionWeblabEnabled?"ImmersiveMultiDimensionView":"ImmersiveSwatchSingleDimensionView");
e.logger.init();e.twisterJSInitData=q;e.symbolForTriggeringDim="*";e.currentDimCombOnGlance="";e.mapOfDimToAsinMaps={};e.mapOfAsinToDimMaps={};e.dimName=e.dimensionData.dimName;e.dimValuesDisplayData=e.dimensionData.dimValuesDisplayData;e.noOfDimValues=e.dimValuesDisplayData.length;e.maxSwatchLimitForImmersive=e.dimensionData.maxSwatchLimitForImmersive;e.dimSubType=e.dimensionData.dimSubType;e.dimensions=e.twisterJSInitData.dimensions;dimensionValuesList=e.twisterJSInitData.dimensionValuesData;dimensionDisplayLabels=
e.twisterJSInitData.dimensionsDisplay;dimensionToAsinMap=e.twisterJSInitData.dimToAsinMapData;asinToDimIndexMapData=e.twisterJSInitData.asinToDimIndexMapData;dimensionsList=e.twisterJSInitData.dimensions;e.initData={};e.initData.scopeSuffix="twister";e.symbolForTriggeringDim="*";e.resizeHelperHandle=new a;e.closeTwisterModal=function(){if(e.isModalOpen)l.enableTwisterDiv(),e.isIE8?e.twisterModalDiv.css("display","none"):e.twisterModalDiv.fadeOut(e.showModalFadeDuration),e.isModalOpen=0};e.openTwisterModal=
function(){if(e.twisterModalDiv.parent().attr("id")!=="centerCol")p(e.centerColDivId+" > hr").first().after(e.twisterModalDiv),c(),b.isSlotsEnabled&&h();else{var a=d.AUI_EVENT_VISIBILITY_PREFIX+e.dimName;p(d.ID_SELECTOR+e.twisterModalDivId+" .swatches li").forceAppear({force_process:!0,$window:e.twisterModalDiv,$scrollHandlerDiv:e.twisterModalContentDiv,eventToBeTriggered:a,blockIsAppear:k})}var a=document.getElementById("twister").querySelectorAll(e.swatchWrapper),f=a.length,g=r();if(g&&g<e.slotsEligibleWidth)for(g=
0;g<f;g++)p(a[g]).removeClass(d.CLASSNAME_FOR_THIN_WIDTH_OVERRIDE);e.twisterModalDiv.css("display","block");a=e.twisterModalDiv.css("transition-duration");e.$twisterModalSwatches.removeClass(e.swatchWrapperClassForAnimation);a!=void 0&&e.twisterModalDiv.css("transition-duration","0s");e.resizeHelperHandle.fixSize(e.$swatches,e.swatchWrapper,e.swatchDynaWrapper,e.ingressWrapper);e.twisterModalDiv.css({"z-index":"1001"});for(var j=p(e.glanceSwatchContainer+" li"),f=j.first()[0].getBoundingClientRect(),
g=f.left,m=f.top,q=0,o=1,j=j.length;o<j;o++){var w;w=p(e.glanceSwatchContainer+" li:eq("+o+")")[0].getBoundingClientRect();if(Math.abs(m-w.top)>5)break;else q=w.right}g=q>0?q-g+55:f.right-g+55;e.setModalWidth(g);e.twisterModalContentDiv.css({"max-height":"420px"});f=p(".twisterModal_innerDiv ul").outerHeight()>p(".twisterModal_innerDiv").outerHeight()+15;navigator.platform.indexOf("Win")>-1&&f&&(g=parseInt(g)+25+"px",e.twisterModalDiv.css("width",g));f&&e.logger.logImpression(e.logger.eventTypes.IMMODAL_VISIBLE_SCROLLBAR,
null);f=document.getElementById("twister").querySelectorAll(e.swatchWrapper);g=f.length;if((m=r())&&m<e.slotsEligibleWidth)for(m=0;m<g;m++)p(f[m]).addClass(d.CLASSNAME_FOR_THIN_WIDTH_OVERRIDE);e.twisterModalDiv.offset();e.twisterModalDiv.outerHeight();if(p(window).height()>500)e.isIE8?(m=e.twisterModalDiv.offset().top+document.documentElement.scrollTop+e.twisterModalDiv.outerHeight(),g=e.twisterModalDiv.offset().top+document.documentElement.scrollTop,f=e.$subNav.offset().top+document.documentElement.scrollTop+
e.$subNav.outerHeight()):(m=e.twisterModalDiv.offset().top+e.twisterModalDiv.outerHeight(),g=e.twisterModalDiv.offset().top,f=e.$subNav.offset().top+e.$subNav.outerHeight()),m>p(window).height()&&(m-=p(window).height(),g=g-m-30,m>0&&(g>f?e.twisterModalDiv.offset({top:g}):e.twisterModalDiv.offset({top:f+20})));m=e.glanceSwatchContainer+" ."+e.ingressWrapper+":first";f="#"+e.twisterModalDivId+":first";e.isIE8?(offSetTopIngress=p(m).offset().top+document.documentElement.scrollTop,offSetTopModal=p(f).offset().top+
document.documentElement.scrollTop):(offSetTopIngress=p(m).offset().top,offSetTopModal=p(f).offset().top);g=p(f).outerHeight();m=p(m).outerHeight();g=offSetTopIngress+m-(offSetTopModal+g);g>0&&(g+=offSetTopModal,p(f).offset({top:g}));l.disableTwisterDiv();e.twisterModalContentDiv.get(0).scrollHeight>e.twisterModalContentDiv.get(0).clientHeight?p(d.ID_SELECTOR+e.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"):p(d.ID_SELECTOR+e.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display",
"none");e.twisterModalDiv.css("display","none");a!=void 0&&(e.$twisterModalSwatches.addClass(e.swatchWrapperClassForAnimation),e.twisterModalDiv.css("transition-duration",a));e.twisterModalDiv.fadeIn(e.showModalFadeDuration);e.isModalOpen=1};e.setModalWidth=function(a){var b=e.twisterFeatureDiv.css("width"),a=parseInt(a);e.twisterModalDiv.css({width:a?a+"px":b});b=a?a:b;b-=30;p(d.ID_SELECTOR+e.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("width",b+"px");p(d.ID_SELECTOR+e.twisterModalDivId+
" ."+d.CLASSNAME_FOR_STYLERTOP).css("width",b+"px")}}});s.when("A","twister-string-constants").register("twister-utils",function(o,l){var b=o.$,a=this,d={};a.windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;a.immersiveTwisterOverlay=b("#"+l.TWISTER_FEATURE_DIV_ID+" #"+l.IMMERSIVE_TWISTER_OVERLAY);a.twisterFeatureDiv=b("#"+l.TWISTER_FEATURE_DIV_ID);(function(){for(var a="Array Object String Date RegExp Function Boolean Number Null Undefined".split(" "),
b=0,l=a.length;b<l;b++)d["is"+a[b]]=function(a){return function(b){return Object.prototype.toString.call(b).slice(8,-1)===a}}(a[b])})();return{enableTwisterDiv:function(){a.immersiveTwisterOverlay.css({opacity:"0",position:"absolute",width:"0px",height:"0px"})},disableTwisterDiv:function(){var b=a.twisterFeatureDiv.get(0).clientWidth,d=a.twisterFeatureDiv.get(0).clientHeight;a.immersiveTwisterOverlay.css({opacity:"0.8",position:"absolute",width:b,height:d,"background-color":"white","z-index":10})},
isSwatchSelected:function(a,b){var d=Twister.isImmersiveExperience?"."+l.TWISTER_SWATCH_CLASS_PREFIX+b.dimensionsMap[a[l.STRING_DIM_INDEX]]+"_"+a[l.STRING_DIM_VALUE_INDEX]:"#"+b.dimensionsMap[a[l.STRING_DIM_INDEX]]+"_"+a[l.STRING_DIM_VALUE_INDEX],r=[],c;if(o.$(d).is("li")){r=o.$(d);Twister.isImmersiveExperience&&!(r.length>0)&&(r=o.$("."+l.TWISTER_SWATCH_CLASS_PREFIX+b.dimensionsMap[a[l.STRING_DIM_INDEX]]+"_"+a[l.STRING_DIM_VALUE_INDEX]));for(var r=r.get(0).className.split(" "),d=0,k=r.length;d<k;d++){var h=
r[d];if(h.indexOf("swatch")===0){c=h;break}}(c===l.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||c===l.CLASS_FOR_SWATCH_UNAVAILABLE)&&o.$("#twisterPopover.twisterPopoverSkin").hide();return c===l.CLASS_FOR_SWATCH_SELECT}else return!1},isPartialState:function(a){for(var b=DetailPage.StateController.getState().currentDimCombID.split("_"),d=!1,l=0;l<a;l++)if(b[l]==="X"){d=!0;break}return d},getImmersivePartialStateBannerContent:function(a,b){for(var d="",o=Twister.immersivePartialStateMessage,c=a.dimensionSelectionData,
k=a.dimensionsDisplay,h=0;h<c.length;h++)h!==b&&c[h][l.STRING_IS_SELECTED]===0&&(d=d?d+", "+k[h]:k[h]);return o.replace("dimName",d)},getImmersiveFullStateBannerContent:function(a,b){for(var d="",o=Twister.immersiveFullySelectedStateMessage,c=a.dimensionSelectionData,k=a.dimensions,h=a.dimensionsDisplay,j=DetailPage.StateController.getState().selected_variations,f=0;f<c.length;f++)f!==b&&c[f][l.STRING_IS_SELECTED]===1&&(d=d?d+", "+h[f]+" "+j[k[f]]:h[f]+" "+j[k[f]]);return o.replace("dimName",d)},
isSmallerWidthScreen:function(){return a.windowWidth<1100?1:0},getAttachedClass:function(a,d){var q=a[l.STRING_DIM_VALUE_INDEX],r="#"+d+"_"+q;if(o.$(r).is("li")){var c=[],k,c=o.$(r);Twister.isImmersiveExperience&&!(c.length>0)&&(c=b("."+l.TWISTER_SWATCH_CLASS_PREFIX+d+"_"+q));c=c.get(0).className.split(" ");q=0;for(r=c.length;q<r;q++){var h=c[q];if(h.indexOf("swatch")===0){k=h;break}}return k}else return r=Twister.isImmersiveExperience?l.IMMERSIVE_DROPDOWN_ROW_PREFIX+d+"_"+q:l.NATIVE_DROPDOWN_DIV_PREFIX+
d+"_"+q,o.$(r).attr("class")},htmlUnescape:function(a){return String(a).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},getDimStyleData:function(a,b,d,o,c){for(var a=a.split("_"),k=[],h=a.slice(0),j,f,g=0;g<b;g++)f={},a[d]===g.toString()?j=l.STYLE_CLASS_TYPE_FOR_SELECTED:(h[d]=g,j=h.join("_"),j=(j=o.isDimCombinationAvailable(j))?l.STYLE_CLASS_TYPE_FOR_AVAILABLE:l.STYLE_CLASS_TYPE_FOR_INAVLID),j=c[j],f.style=j,k[g]=f;return k},getVisibleTableRows:function(a,
d){var l=[],o=a.getBoundingClientRect();d||(d=b(a).find("tr"));if(d.length)for(var c=0;c<d.length;c++){var k=d.get(c),h=k.getBoundingClientRect(),j=(h.bottom-h.top)/2,f=o.bottom+j;o.top-j<h.top&&f>h.bottom&&l.push(k);if(o.bottom<h.top)break}return l},reconstructCombinationWithDimValue:function(a,b,d){if(!a)return a;var o=a.split(l.CHAR_UNDERSCORE);if(b>=o.length)return a;o[b]=d;return o.join(l.CHAR_UNDERSCORE)},isTouchDevice:function(){return o.capabilities.touch},typeChecker:d,getQueryParams:function(a){var a=
a===void 0?{}:a,d={},l=decodeURIComponent(window.location.href).match(/^.*?\?(.*?)(#.*)?$/);if(l===null||l.length<2||l[1]===void 0)return{};l=l[1].split("&");b.each(l,function(b,c){var k=c.split("=");k.length<2||a.hasOwnProperty(k[0])||(d[k[0]]=k[1])});return d}}});s.when("A").register("twister-string-constants",function(){return{YES:"YES",NO:"NO",MTYPE_PARENT:"parent",MTYPE_PARTIAL:"partial",MTYPE_FULL:"full",MTYPE_MASTER:"master",AUI_DROPDOWN_EVENT_PREFIX:"a:dropdown:selected:",AUI_EVENT_FOR_SWATCHTHUMB:"swatchthumb-action",
CHAR_SEMICOLON:":",CHAR_UNDERSCORE:"_",CLASS_FOR_DROPDOWN_UNAVAILABLE:"dropdownUnavailable",CLASS_FOR_NEW_TWISTER_EVDD:"#newTwisterEVDD",CLASS_FOR_NON_JS_EVDD:"#nonJSEVDD",CLASS_FOR_SWATCH_AVAILABLE:"swatchAvailable",CLASS_FOR_SWATCH_HOVER:"swatchHover",CLASS_FOR_SWATCH_SELECT:"swatchSelect",CLASS_FOR_SWATCH_UNAVAILABLE:"swatchUnavailable",CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:"swatchUnavailableHover",CLASS_FOR_VODD_AVAILABLE:"voddAvailable",CLASS_FOR_VODD_HOVER:"voddHover",CLASS_FOR_VODD_SELECT:"voddSelect",
CLASS_FOR_VODD_UNAVAILABLE:"voddUnavailable",CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION:"dropdownSelect",DROPDOWN_DIV_NAME:"dropdown_selected_",EVENT_TYPE_SHOWPOPOVER:"showPopover",EVENT_TYPE_HIDEPOPOVER:"hidePopover",EVENT_TYPE_UPDATEPOPOVERPOSITION:"updatePopoverPosition",EVENT_TYPE_DROPDOWN_CHANGE:"dropdownChange",EVENT_TYPE_CLICK:"click",EVENT_TYPE_MOUSEENTER:"mouseenter",EVENT_TYPE_MOUSELEAVE:"mouseleave",EVENT_TYPE_MOUSEDOWN:"mousedown",EVENT_TYPE_MOUSEOUT:"mouseOut",EVENT_TYPE_MOUSEOVER:"mouseOver",
EVENT_TYPE_TOUCHSTART:"touchstart",EVENT_TYPE_TOUCHEND:"touchend",ID_SELECTOR:"#",TWISTER_POPOVER:"twisterPopover",INDEX_FOR_SELECT_OPTION:"-1",INIT_DATA_ASIN_TO_DIM_INDEX_MAP:"asinToDimIndexMapData",INIT_DATA_DELETED_LANDING_ASIN_INFO:"deletedLandingAsinInfo",INIT_DATA_DIM_TO_ASIN_MAP:"dimToAsinMapData",INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA:"dimensionValuesDisplayData",INIT_DATA_DIMENSIONS_DISPLAY:"dimensionsDisplay",INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP:"dimensionsDisplayType",INIT_DATA_DIMENSIONS_MAP:"dimensions",
INIT_DATA_VARIATIONS_DISPLAY_LABELS:"variationDisplayLabels",INIT_DATA_MAX_POPOVER_HEIGHT:"maxPopoverHeight",INIT_DATA_VISIBLE_ROW_COUNT:"visibleRowCount",INIT_DATA_POPOVER_POSITION:"popoverPosition",INIT_DATA_ANIMATE_BUTTON_CONTENT:"animateButtonContent",INIT_DATA_DISPLAY_TYPE_PROPERTIES:"displayTypeProperties",NATIVE_DROPDOWN_DIV_PREFIX:"#native_",STRING_CSS_CLASS:"css_class",STRING_DIM_COMB_ID:"dimCombID",STRING_DIM_DATA:"dimData",STRING_DIM_INDEX:"dimIndex",STRING_DIM_NAME:"dimName",STRING_DIM_ORDER:"dimOrder",
STRING_DIM_VALUE_INDEX:"dimValueIndex",STRING_DIMENSION_DISPLAY_MAP:"dimensionDisplayMap",STRING_DIMENSION_DISPLAY_STRING:"dimensionDisplayString",STRING_DIMENSION_SELECTION_DATA:"dimensionSelectionData",STRING_DIMENSION_VALUES_DATA:"dimensionValuesData",STRING_DIMENSION_VALUES_DATA_GLOBAL:"dimensionValuesDataGlobal",STRING_DIMENSIONS_MAP:"dimensionsMap",STRING_DISPLAY_CONFIG_STYLES_DATA:"displayConfigStylesData",STRING_EVENT_DATA:"eventData",STRING_EVENT_DIM_DATA:"dimData",STRING_EVENT_DIM_INFO:"eventDimInfo",
STRING_EVENT_DIV_METADATA:"divMetaData",STRING_EVENT_POPOVER_DATA:"popoverData",STRING_EVENT_TYPE:"eventType",STRING_HIDE_POPOVER:"hidePopover",STRING_HOVER_MS:"hoverMS",STRING_IS_REQUIRED:"isRequired",STRING_IS_SELECTED:"isSelected",STRING_NATIVE_CSS_CLASS:"native_css_class",STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER:"showDimSecondUnavailablePopover",STRING_STYLE:"style",STRING_TWISTER_CONTROLLER_HANDLE:"twisterControllerHandle",STRING_TWISTER_INITIAL_STATE_KEY:"twisterInitialState",STRING_UNAVAILABLE_POPOVER_STRING_VALUE:"unavailablePopOverStringValue",
STRING_USE_MS:"useMS",STYLE_CLASS_TYPE_FOR_AVAILABLE:"available",STYLE_CLASS_TYPE_FOR_INAVLID:"invalid",STYLE_CLASS_TYPE_FOR_SELECTED:"selected",TWISTER_DIMENSION_VIEW_DROPDOWN:"dropdown",TWISTER_DIMENSION_VIEW_EVDD:"etdd",TWISTER_DIMENSION_VIEW_SINGLETON:"singleton",TWISTER_DIMENSION_VIEW_SWATCH:"swatch",TWISTER_DIMENSION_VIEW_VODD:"vodd",TWISTER_DIMENSION_VIEW_COUNTER:"counter",TWISTER_EVENT_DATA_DIV_METADATA:"divMetaData",TWISTER_EVENT_DATA_DISPLAY_TYPE:"dimDisplayType",TWISTER_EVENT_DATA_TIME:"time",
TWISTER_EVENT_DATA_DURATION:"duration",TWISTER_EVENT_DATA_COUNT:"count",TWISTER_EVENT_DATA_PERCENTAGE:"percentage",TWISTER_EVENT_DATA_DIM_INDEX:"dimIndex",MODAL_SWATCH_PREFIX:"modal_",STRING_MAX_SWATCHES_IMMERSIVE_VIEW:"maxSwatchesForImmersiveView",TWISTER_SWATCH_CLASS_PREFIX:"twister_",PRICE_SLOT_CLASS_NAME:"twister_swatch_price",CLASS_FOR_PRICE_SECONDARY:"a-color-secondary",CLASS_FOR_PRICE_SELECTED:"a-color-price",TWISTER_MODAL_ID_PREFIX:"twister_modal_",TWISTER_INGRESS_ID_PREFIX:"twister_ingress_",
AUI_EVENT_FOR_INGRESS_PREFIX:"twister-ingress-click-",TWISTER_FEATURE_DIV_ID:"twister_feature_div",IMMERSIVE_TWISTER_OVERLAY:"immersiveTwisterOverlay",CENTER_COL_DIV_ID:"centerCol",MODAL_CONTENTDIV_PREFIX:"twister_modal_innerDiv_",MODAL_HEADER_PREFIX:"twister_modal_header_",IMMERSIVE_DROPDOWN_ROW_PREFIX:"twister_idd_",DYNAMIC_STYLE_RULES_ID:"twisterSwatchWrapperDynaStyle",CLASSNAME_FOR_STYLERBOTTOM:"twisterModal_stylerBottom",CLASSNAME_FOR_STYLERTOP:"twisterModal_stylerTop",CLASSNAME_FOR_SWATCH:"twisterSwatchWrapper",
CLASSNAME_FOR_INGRESS:"twisterIngressWrapper",AUI_EVENT_CLOSE_MODAL_PREFIX:"close-twisterModal-",AUI_EVENT_VISIBILITY_PREFIX:"twister-appear-",CLASSNAME_FOR_THIN_WIDTH_OVERRIDE:"thinWidthOverride",AUI_EVENT_FOR_COUNTER:"twister_counter-action",EXPANDED_VIEW_ENABLED:"expandedViewEnabled",MIN_ASINS_FOR_EXPANDED_VIEW:"minAsinForExpandedView",MIN_ASINS_FOR_EXPANDED_SCROLL:"minAsinForExpandedScroll"}});s.when("A").register("twister-thumbnailModule",function(o){var l=o.$;return{attach:function(b){var a=
l("#dropdown_selected_thumbnail_"+b),b=l("#dropdown_selected_"+b+" .a-button-inner");a.length>0&&b.length>0&&(a.detach(),b.append(a),a.attr("src")!=="#"&&a.show())},update:function(b){var a=l("#native_dropdown_selected_"+b).val().split(",")[0];typeof a!=="undefined"&&a!=="-1"&&(a=l("#native_"+b+"_"+a),a=a.length>0?a.attr("data-a-image-source"):"",b=l("#dropdown_selected_thumbnail_"+b),b.length>0&&a!==""?(b.attr("src",a),b.show()):b.hide())},preloadAllThumbnails:function(b){if(b){var a=l("#native_dropdown_selected_"+
b+" option"),b=l("#dropdown_selected_"+b).attr("data-a-class");a&&b&&b.indexOf("twister-image-dropdown")!==-1&&l.each(a,function(a,b){var i=b.getAttribute("data-a-image-source");if(i)(new Image).src=i})}}}});s.when("A","twister-string-constants","scroll-event-handler").execute(function(o,l,b){(function(a){function d(b){function d(f,h){var i=a(h).get(0).getBoundingClientRect(),e=b.$window.get(0).getBoundingClientRect(),k=e.right-e.left,j=e.bottom-e.top;return e.top<i.top&&i.top<e.top+j&&e.left<i.left&&
i.left<e.left+k}q=!1;for(var h=0,j=b.selector.length;h<j;h++){var f=[];if(b.blockIsAppear===void 0||!b.blockIsAppear())f=a(b.selector[h]).filter(function(){return a(this).is(d)}).not(i);f.length>0&&(o.trigger(b.eventToBeTriggered,[f.clone()]),i=i.add(f))}}var l=[],i=a(),q=!1,r={interval:250,force_process:!1};a.fn.extend({appearedInTwisterImmersiveView:function(c){var i=a.extend({},r,c||{}),h=this.selector||this;i.selector=[];i.selector[0]=h;var j=function(){q||(q=!0,setTimeout(function(){d(i)},i.interval))};
new b(200,c.$scrollHandlerDiv,j);c.$window.resize(j);i.force_process&&setTimeout(function(){d(i)},i.interval);l.push(h);return a(h)},forceAppear:function(b){var i=a.extend({},r,b||{}),b=this.selector||this;i.selector=[];i.selector[0]=b;setTimeout(function(){d(i)},i.interval)},invalidateAppearedAlreadyCache:function(){i=i.not(this.selector)}})})(o.$)});s.when("A","legacy-popover").register("twister-legacy-popover",function(o,l){return l});s.when("A","twister-utils","twister-string-constants").register("twister-counter",
function(o,l,b){return function(a,d){function l(a,b){var c=k(p+b);a?c.addClass(s):c.removeClass(s)}function i(){x.height();x.animate({height:h},{duration:j,queue:!1,complete:function(){x.css("overflow","hidden")}});x.animate({scrollTop:0},{duration:j,queue:!1});r(!0);q(!0)}function q(a){a&&c.currDimCombID>=C?(c.currDimCombID==C?(n.removeClass(w),t=u):t=c.currDimCombID==C+1?f:k(p+(c.currDimCombID-1)),cur_selected.insertBefore(f),u.addClass(w)):!a&&u.hasClass(w)&&(u.removeClass(w),f.prev().insertAfter(t))}
function r(a){a?(g.addClass(w),n.addClass(w),f.removeClass(w)):(f.addClass(w),n.removeClass(w),g.removeClass(w))}var c=this,k=o.$,h=55,j=500,f=k(b.ID_SELECTOR+"expanderButton"),g=k(b.ID_SELECTOR+"collapseButton"),s="hoverSwatch",w="aok-hidden",e,p,x,y,z,C,n,u,A,t;c.updateView=function(a){a[b.STRING_EVENT_TYPE]===b.EVENT_TYPE_CLICK&&(a=a[b.STRING_EVENT_DATA][b.STRING_EVENT_DIM_INFO][b.STRING_DIMENSION_VALUES_DATA][c.dimOrder],prev_selected.css("z-index",0),cur_selected.css("z-index",1),e.html(a),cur_selected.removeClass(s),
cur_selected.addClass("selectedSwatch"),prev_selected.removeClass("selectedSwatch"))};c.handleExpand=function(){var a=x.height();q(!1);r(!1);if(A>=z)x.height(a).animate({height:155},{duration:j,queue:!1,complete:function(){x.css("overflow","auto")}}),a=cur_selected.offset().top-x.offset().top,a>155&&x.animate({scrollTop:a},{duration:j,queue:!1});else{var b=x.css("height","auto").height();x.height(a).animate({height:b},j)}};c.selectCounterVariationAtIndex=function(a){k(p+a).children().click()};c.getCurrentSelectedIndex=
function(){return parseInt(c.currDimCombID,10)};c.dimOrder=d[b.STRING_DIM_ORDER];c.dimName=d[b.STRING_DIM_NAME];c.dimensionsMap=d[b.STRING_DIMENSIONS_MAP];c.dimNameDisplayString=d[b.STRING_DIMENSION_DISPLAY_STRING];c.dimValuesDisplayData=d[b.STRING_DIMENSION_VALUES_DATA];c.twisterControllerHandle=d[b.STRING_TWISTER_CONTROLLER_HANDLE];c.initialTwisterState=d[b.STRING_TWISTER_INITIAL_STATE_KEY];c.expandedViewEnabled=a[b.EXPANDED_VIEW_ENABLED];c.minAsinsForExpandedView=a[b.MIN_ASINS_FOR_EXPANDED_VIEW];
c.minAsinsForExpandedScroll=a[b.MIN_ASINS_FOR_EXPANDED_SCROLL];c.dimSubType=d.dimensionDisplaySubType;c.currDimCombID=c.initialTwisterState.getCurrentDimCombID();e=k(b.ID_SELECTOR+"counter-label-"+c.dimName+" .selection");p=b.ID_SELECTOR+c.dimName+b.CHAR_UNDERSCORE;x=k(b.ID_SELECTOR+"counterSwatchSection-"+c.dimName);y=c.minAsinsForExpandedView;z=c.minAsinsForExpandedScroll;C=y-1-1;n=k(p+C);u=k(p+(C-1));A=c.dimValuesDisplayData.length;prev_selected=k(p+c.currDimCombID);cur_selected=k(p+c.currDimCombID);
(function(){o.declarative(b.AUI_EVENT_FOR_COUNTER,[b.EVENT_TYPE_CLICK,b.EVENT_TYPE_MOUSEENTER,b.EVENT_TYPE_MOUSELEAVE],function(a){if(a.type===b.EVENT_TYPE_CLICK){if(cur_selected=k(b.ID_SELECTOR+a.data.dimValueSelectedID),c.twisterControllerHandle&&c.currDimCombID!=a.data[b.STRING_DIM_VALUE_INDEX])c.twisterControllerHandle.handleClick(a.data),c.currDimCombID=a.data[b.STRING_DIM_VALUE_INDEX],o.trigger("counter:select",c.currDimCombID),prev_selected=cur_selected}else a.type===b.EVENT_TYPE_MOUSEENTER?
(c.twisterControllerHandle&&c.twisterControllerHandle.handleMouseOver(a.data),a=a.data[b.STRING_DIM_VALUE_INDEX],k(p+a).css("cursor","pointer"),a!=c.currDimCombID&&(k(p+a).css("z-index",1),l(!0,a),e.html(c.dimValuesDisplayData[a]))):a.type===b.EVENT_TYPE_MOUSELEAVE&&(c.twisterControllerHandle&&c.twisterControllerHandle.handleMouseOut(a.data,a.data[b.STRING_DIM_INDEX],a.data[b.STRING_DIM_VALUE_INDEX]),a=a.data[b.STRING_DIM_VALUE_INDEX],a!=c.currDimCombID&&(k(p+a).css("z-index",0),l(!1,a),e.html(c.dimValuesDisplayData[c.currDimCombID])))})})();
(function(){c.expandedViewEnabled&&c.dimValuesDisplayData.length>=c.minAsinsForExpandedView&&(f.click(function(){c.handleExpand()}),g.click(function(){i()}),q(!0))})();window.CounterScenesController&&window.CounterScenesController.registerCounter(c)}});s.when("A","a-popover","twister-string-constants","twister-utils").register("twister-vodd-popover",function(o,l,b,a){return function(d){function m(a,b){s.eventListener&&s.eventListener.handlePopoverEvent&&s.eventListener.handlePopoverEvent(a,b)}function i(a){m(b.EVENT_TYPE_SHOWPOPOVER,
a);var d=s.displayPosition==="bottom"?k:h;a.popover.$container.hasClass(d)||a.popover.$container.addClass(d);c(a.popover.$container)}function q(a){m(b.EVENT_TYPE_HIDEPOPOVER,a);a.popover.$trigger.blur()}function r(a){c(a.popover.$container);m(b.EVENT_TYPE_UPDATEPOPOVERPOSITION,a)}function c(a){var b=g.get(0).getBoundingClientRect(),c,d;window.pageYOffset?(c=window.pageYOffset,d=window.pageXOffset):(document.compatMode||"")==="CSS1Compat"?(c=document.documentElement.scrollTop,d=document.documentElement.scrollLeft):
(c=document.body.scrollTop,d=document.body.scrollLeft);c=s.displayPosition==="bottom"?b.bottom+c:b.top+c-a.height();var f=b.right-b.left,b=b.left+d;a&&a.css({top:c+"px",left:b+"px",width:f+"px"})}var k="vodd-modified-popover",h="vodd-modified-top-popover",j,f=o.$,g,s={name:null,trigger:null,eventListener:null,displayPosition:"bottom",positionOnTwisterContainer:!0};this.getHandle=function(){return j};d&&f.extend(s,d);if(!s.name)throw"Popover name should not be null";if(!s.trigger)throw"Popover trigger should not be null";
(function(){var b="triggerBottom";s.displayPosition==="top"&&(b="triggerTop");b={closeButton:!1,closeButtonLabel:"close",position:b,name:s.name,popoverLabel:s.name,activate:a.isTouchDevice()?"onmouseover":"onclick"};s.height&&f.extend(b,{height:s.height});j=l.create(s.trigger,b)})();(function(){o.on("a:popover:afterShow:"+s.name,i);o.on("a:popover:afterHide:"+s.name,q);o.on("a:popover:afterUpdatePosition:"+s.name,r);var a=function(){j&&j.isActive()&&c(j.$container)};o.on("a:pageUpdate",a);f(window).resize(a)})();
g=s.positionOnTwisterContainer?f("#twister"):popover.trigger}})})})(function(){var s=window.AmazonUIPageJS||P,o=s.attributeErrors;return o?o("DetailPageTwisterAssets"):s}());